
================================================================================================
FILE PATH: App.config
================================================================================================
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
	<connectionStrings>
		<add name="HotelDb"
			 connectionString="Data Source=ALUCARD;Initial Catalog=HotelDb;Integrated Security=True"
			 providerName="System.Data.SqlClient" />
	</connectionStrings>
</configuration>


================================================================================================
FILE PATH: Data\BookingDAL.cs
================================================================================================
using System;
using System.Collections.Generic;
using System.Data.SqlClient;
using HotelManagement.Models;

namespace HotelManagement.Data
{
    public class BookingDAL
    {
        public List<Booking> GetAll()
        {
            var list = new List<Booking>();
            using (SqlConnection conn = DbHelper.GetConnection())
            {
                string query = @"SELECT DatPhongID, KhachHangID, PhongID, NgayDen, NgayDiDuKien, NgayDiThucTe, TrangThai, TienCoc 
                                 FROM DATPHONG";
                SqlCommand cmd = new SqlCommand(query, conn);
                SqlDataReader rd = cmd.ExecuteReader();
                while (rd.Read())
                {
                    list.Add(new Booking
                    {
                        DatPhongID = rd.GetInt32(0),
                        KhachHangID = rd.GetInt32(1),
                        PhongID = rd.GetInt32(2),
                        NgayDen = rd.GetDateTime(3),
                        NgayDiDuKien = rd.GetDateTime(4),
                        NgayDiThucTe = rd.IsDBNull(5) ? (DateTime?)null : rd.GetDateTime(5),
                        TrangThai = rd.GetInt32(6),
                        TienCoc = rd.GetDecimal(7)
                    });
                }
            }
            return list;
        }

        // 0 = Đặt trước, 1 = Đang ở, 2 = Đã trả
        public int CreateBooking(Booking b)
        {
            using (SqlConnection conn = DbHelper.GetConnection())
            {
                string query = @"INSERT INTO DATPHONG (KhachHangID, PhongID, NgayDen, NgayDiDuKien, NgayDiThucTe, TrangThai, TienCoc)
                                 VALUES(@KhachHangID, @PhongID, @NgayDen, @NgayDiDuKien, NULL, @TrangThai, @TienCoc);
                                 SELECT SCOPE_IDENTITY();";
                SqlCommand cmd = new SqlCommand(query, conn);
                cmd.Parameters.AddWithValue("@KhachHangID", b.KhachHangID);
                cmd.Parameters.AddWithValue("@PhongID", b.PhongID);
                cmd.Parameters.AddWithValue("@NgayDen", b.NgayDen);
                cmd.Parameters.AddWithValue("@NgayDiDuKien", b.NgayDiDuKien);
                cmd.Parameters.AddWithValue("@TrangThai", b.TrangThai); // thường là 0
                cmd.Parameters.AddWithValue("@TienCoc", b.TienCoc);

                int newId = Convert.ToInt32(cmd.ExecuteScalar());

                // Khi có booking mới (đặt trước) -> phòng chuyển sang "Đã có khách đặt" (3)
                string queryRoom = @"UPDATE PHONG SET TrangThai = 3 WHERE PhongID = @PhongID";
                SqlCommand cmdRoom = new SqlCommand(queryRoom, conn);
                cmdRoom.Parameters.AddWithValue("@PhongID", b.PhongID);
                cmdRoom.ExecuteNonQuery();

                return newId;
            }
        }

        public void UpdateStatus(int datPhongID, int status, DateTime? ngayDiThucTe)
        {
            using (SqlConnection conn = DbHelper.GetConnection())
            {
                string query = @"UPDATE DATPHONG
                                 SET TrangThai = @TrangThai,
                                     NgayDiThucTe = @NgayDiThucTe
                                 WHERE DatPhongID = @DatPhongID";

                SqlCommand cmd = new SqlCommand(query, conn);
                cmd.Parameters.AddWithValue("@TrangThai", status);
                if (ngayDiThucTe.HasValue)
                    cmd.Parameters.AddWithValue("@NgayDiThucTe", ngayDiThucTe.Value);
                else
                    cmd.Parameters.AddWithValue("@NgayDiThucTe", DBNull.Value);
                cmd.Parameters.AddWithValue("@DatPhongID", datPhongID);
                cmd.ExecuteNonQuery();

                // Cập nhật trạng thái PHONG tương ứng:
                // 0 = Đặt trước (Đã có khách đặt) -> 3
                // 1 = Đang ở -> 1 (Có khách)
                // 2 = Đã trả -> 2 (Chưa dọn)
                string queryRoom = "";

                if (status == 0)        // đặt trước
                    queryRoom = @"UPDATE PHONG SET TrangThai = 3 
                                  WHERE PhongID = (SELECT PhongID FROM DATPHONG WHERE DatPhongID = @DatPhongID)";
                else if (status == 1)   // đang ở
                    queryRoom = @"UPDATE PHONG SET TrangThai = 1 
                                  WHERE PhongID = (SELECT PhongID FROM DATPHONG WHERE DatPhongID = @DatPhongID)";
                else if (status == 2)   // đã trả
                    queryRoom = @"UPDATE PHONG SET TrangThai = 2 
                                  WHERE PhongID = (SELECT PhongID FROM DATPHONG WHERE DatPhongID = @DatPhongID)";

                if (!string.IsNullOrEmpty(queryRoom))
                {
                    SqlCommand cmdRoom = new SqlCommand(queryRoom, conn);
                    cmdRoom.Parameters.AddWithValue("@DatPhongID", datPhongID);
                    cmdRoom.ExecuteNonQuery();
                }
            }
        }

        public Booking GetById(int id)
        {
            using (SqlConnection conn = DbHelper.GetConnection())
            {
                string query = @"SELECT DatPhongID, KhachHangID, PhongID, NgayDen, NgayDiDuKien, NgayDiThucTe, TrangThai, TienCoc
                                 FROM DATPHONG
                                 WHERE DatPhongID = @Id";
                SqlCommand cmd = new SqlCommand(query, conn);
                cmd.Parameters.AddWithValue("@Id", id);

                SqlDataReader rd = cmd.ExecuteReader();
                if (rd.Read())
                {
                    return new Booking
                    {
                        DatPhongID = rd.GetInt32(0),
                        KhachHangID = rd.GetInt32(1),
                        PhongID = rd.GetInt32(2),
                        NgayDen = rd.GetDateTime(3),
                        NgayDiDuKien = rd.GetDateTime(4),
                        NgayDiThucTe = rd.IsDBNull(5) ? (DateTime?)null : rd.GetDateTime(5),
                        TrangThai = rd.GetInt32(6),
                        TienCoc = rd.GetDecimal(7)
                    };
                }
            }
            return null;
        }

        public decimal GetDonGiaNgayByPhong(int phongID)
        {
            using (SqlConnection conn = DbHelper.GetConnection())
            {
                string query = @"SELECT lp.DonGiaNgay
                                 FROM PHONG p
                                 JOIN LOAIPHONG lp ON p.LoaiPhongID = lp.LoaiPhongID
                                 WHERE p.PhongID = @PhongID";
                SqlCommand cmd = new SqlCommand(query, conn);
                cmd.Parameters.AddWithValue("@PhongID", phongID);
                object result = cmd.ExecuteScalar();
                if (result != null && result != DBNull.Value)
                    return Convert.ToDecimal(result);
            }
            return 0;
        }
    }
}


================================================================================================
FILE PATH: Data\CustomerDAL.cs
================================================================================================
using System;
using System.Collections.Generic;
using System.Data.SqlClient;
using HotelManagement.Models;

namespace HotelManagement.Data
{
    public class CustomerDAL
    {
        public List<Customer> GetAll()
        {
            var list = new List<Customer>();
            using (SqlConnection conn = DbHelper.GetConnection())
            {
                string query = "SELECT KhachHangID, HoTen, CCCD, DienThoai, DiaChi FROM KHACHHANG";
                SqlCommand cmd = new SqlCommand(query, conn);
                SqlDataReader rd = cmd.ExecuteReader();
                while (rd.Read())
                {
                    list.Add(new Customer
                    {
                        KhachHangID = rd.GetInt32(0),
                        HoTen = rd.GetString(1),
                        CCCD = rd.GetString(2),
                        DienThoai = rd.IsDBNull(3) ? null : rd.GetString(3),
                        DiaChi = rd.IsDBNull(4) ? null : rd.GetString(4)
                    });
                }
            }
            return list;
        }

        public void Insert(Customer c)
        {
            using (SqlConnection conn = DbHelper.GetConnection())
            {
                string query = @"INSERT INTO KHACHHANG (HoTen, CCCD, DienThoai, DiaChi)
                                 VALUES(@HoTen, @CCCD, @DienThoai, @DiaChi)";
                SqlCommand cmd = new SqlCommand(query, conn);
                cmd.Parameters.AddWithValue("@HoTen", c.HoTen);
                cmd.Parameters.AddWithValue("@CCCD", c.CCCD);
                cmd.Parameters.AddWithValue("@DienThoai", (object)c.DienThoai ?? DBNull.Value);
                cmd.Parameters.AddWithValue("@DiaChi", (object)c.DiaChi ?? DBNull.Value);
                cmd.ExecuteNonQuery();
            }
        }

        public void Update(Customer c)
        {
            using (SqlConnection conn = DbHelper.GetConnection())
            {
                string query = @"UPDATE KHACHHANG
                                 SET HoTen = @HoTen,
                                     CCCD = @CCCD,
                                     DienThoai = @DienThoai,
                                     DiaChi = @DiaChi
                                 WHERE KhachHangID = @KhachHangID";
                SqlCommand cmd = new SqlCommand(query, conn);
                cmd.Parameters.AddWithValue("@HoTen", c.HoTen);
                cmd.Parameters.AddWithValue("@CCCD", c.CCCD);
                cmd.Parameters.AddWithValue("@DienThoai", (object)c.DienThoai ?? DBNull.Value);
                cmd.Parameters.AddWithValue("@DiaChi", (object)c.DiaChi ?? DBNull.Value);
                cmd.Parameters.AddWithValue("@KhachHangID", c.KhachHangID);
                cmd.ExecuteNonQuery();
            }
        }

        public void Delete(int id)
        {
            using (SqlConnection conn = DbHelper.GetConnection())
            {
                string query = "DELETE FROM KHACHHANG WHERE KhachHangID = @Id";
                SqlCommand cmd = new SqlCommand(query, conn);
                cmd.Parameters.AddWithValue("@Id", id);
                cmd.ExecuteNonQuery();
            }
        }
    }
}


================================================================================================
FILE PATH: Data\DbHelper.cs
================================================================================================
using System;
using System.Data.SqlClient;
using System.Windows.Forms;

namespace HotelManagement.Data
{
    public static class DbHelper
    {
        // *** CHỖ NÀY BẠN CẦN CHỈNH LẠI THEO SQL SERVER CỦA BẠN ***

        // Nếu bạn dùng SQL Server Express trên máy:
        // private static readonly string _connectionString =
        //     @"Data Source=.\SQLEXPRESS;Initial Catalog=HotelDb;Integrated Security=True";

        // Nếu bạn dùng LocalDB (VS cài sẵn):
        // private static readonly string _connectionString =
        //     @"Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=HotelDb;Integrated Security=True";

        // Tạm thời mình để LocalDB – nếu bạn đang dùng SQLEXPRESS thì đổi lại dòng trên.
        private static readonly string _connectionString =
            @"Data Source=ALUCARD;Initial Catalog=HotelDb;Integrated Security=True";

        /// <summary>
        /// Lấy SqlConnection đã mở sẵn.
        /// Nếu lỗi sẽ hiện message box tiếng Việt và ném exception ra ngoài.
        /// </summary>
        public static SqlConnection GetConnection()
        {
            try
            {
                var conn = new SqlConnection(_connectionString);
                conn.Open();
                return conn;
            }
            catch (SqlException ex)
            {
                MessageBox.Show(
                    "Không kết nối được đến SQL Server.\n" +
                    "Vui lòng kiểm tra lại DbHelper._connectionString và database HotelDb.\n\n" +
                    "Chi tiết lỗi:\n" + ex.Message,
                    "Lỗi kết nối CSDL",
                    MessageBoxButtons.OK,
                    MessageBoxIcon.Error);

                throw; // ném lỗi tiếp để code gọi biết là đã lỗi
            }
            catch (Exception ex)
            {
                MessageBox.Show(
                    "Đã xảy ra lỗi không mong muốn khi kết nối CSDL.\n\n" +
                    "Chi tiết lỗi:\n" + ex.Message,
                    "Lỗi kết nối CSDL",
                    MessageBoxButtons.OK,
                    MessageBoxIcon.Error);

                throw;
            }
        }
    }
}


================================================================================================
FILE PATH: Data\InvoiceDAL.cs
================================================================================================
using System;
using System.Collections.Generic;
using System.Data.SqlClient;
using HotelManagement.Models;

namespace HotelManagement.Data
{
    public class InvoiceDAL
    {
        public void CreateInvoice(Invoice invoice)
        {
            using (SqlConnection conn = DbHelper.GetConnection())
            {
                string query = @"INSERT INTO HOADON (DatPhongID, NgayLap, TongTien, DaThanhToan)
                                 VALUES(@DatPhongID, @NgayLap, @TongTien, @DaThanhToan)";
                SqlCommand cmd = new SqlCommand(query, conn);
                cmd.Parameters.AddWithValue("@DatPhongID", invoice.DatPhongID);
                cmd.Parameters.AddWithValue("@NgayLap", invoice.NgayLap);
                cmd.Parameters.AddWithValue("@TongTien", invoice.TongTien);
                cmd.Parameters.AddWithValue("@DaThanhToan", invoice.DaThanhToan);
                cmd.ExecuteNonQuery();
            }
        }

        public List<Invoice> GetInvoices(DateTime from, DateTime to)
        {
            var list = new List<Invoice>();
            using (SqlConnection conn = DbHelper.GetConnection())
            {
                string query = @"SELECT HoaDonID, DatPhongID, NgayLap, TongTien, DaThanhToan
                                 FROM HOADON
                                 WHERE NgayLap BETWEEN @From AND @To";
                SqlCommand cmd = new SqlCommand(query, conn);
                cmd.Parameters.AddWithValue("@From", from);
                cmd.Parameters.AddWithValue("@To", to);

                SqlDataReader rd = cmd.ExecuteReader();
                while (rd.Read())
                {
                    list.Add(new Invoice
                    {
                        HoaDonID = rd.GetInt32(0),
                        DatPhongID = rd.GetInt32(1),
                        NgayLap = rd.GetDateTime(2),
                        TongTien = rd.GetDecimal(3),
                        DaThanhToan = rd.GetBoolean(4)
                    });
                }
            }
            return list;
        }
    }
}


================================================================================================
FILE PATH: Data\RoomDAL.cs
================================================================================================
using System;
using System.Collections.Generic;
using System.Data.SqlClient;
using HotelManagement.Models;

namespace HotelManagement.Data
{
    public class RoomDAL
    {
        // Lấy tất cả phòng
        public List<Room> GetAll()
        {
            var list = new List<Room>();

            using (SqlConnection conn = DbHelper.GetConnection())
            {
                string query = @"SELECT PhongID, MaPhong, LoaiPhongID, Tang, TrangThai, GhiChu,
                                        ThoiGianBatDau, KieuThue, TenKhachHienThi
                                 FROM PHONG";

                using (SqlCommand cmd = new SqlCommand(query, conn))
                using (SqlDataReader rd = cmd.ExecuteReader())
                {
                    while (rd.Read())
                    {
                        var room = new Room
                        {
                            PhongID = rd.GetInt32(0),
                            MaPhong = rd.GetString(1),
                            LoaiPhongID = rd.GetInt32(2),
                            Tang = rd.GetInt32(3),
                            TrangThai = rd.GetInt32(4),
                            GhiChu = rd.IsDBNull(5) ? null : rd.GetString(5),
                            ThoiGianBatDau = rd.IsDBNull(6) ? (DateTime?)null : rd.GetDateTime(6),
                            KieuThue = rd.IsDBNull(7) ? (int?)null : rd.GetInt32(7),
                            TenKhachHienThi = rd.IsDBNull(8) ? null : rd.GetString(8)
                        };

                        list.Add(room);
                    }
                }
            }

            return list;
        }

        // Lấy 1 phòng theo ID
        public Room GetById(int id)
        {
            using (SqlConnection conn = DbHelper.GetConnection())
            {
                string query = @"SELECT PhongID, MaPhong, LoaiPhongID, Tang, TrangThai, GhiChu,
                                        ThoiGianBatDau, KieuThue, TenKhachHienThi
                                 FROM PHONG
                                 WHERE PhongID = @Id";

                using (SqlCommand cmd = new SqlCommand(query, conn))
                {
                    cmd.Parameters.AddWithValue("@Id", id);

                    using (SqlDataReader rd = cmd.ExecuteReader())
                    {
                        if (rd.Read())
                        {
                            return new Room
                            {
                                PhongID = rd.GetInt32(0),
                                MaPhong = rd.GetString(1),
                                LoaiPhongID = rd.GetInt32(2),
                                Tang = rd.GetInt32(3),
                                TrangThai = rd.GetInt32(4),
                                GhiChu = rd.IsDBNull(5) ? null : rd.GetString(5),
                                ThoiGianBatDau = rd.IsDBNull(6) ? (DateTime?)null : rd.GetDateTime(6),
                                KieuThue = rd.IsDBNull(7) ? (int?)null : rd.GetInt32(7),
                                TenKhachHienThi = rd.IsDBNull(8) ? null : rd.GetString(8)
                            };
                        }
                    }
                }
            }

            return null;
        }

        public void Insert(Room room)
        {
            // (Giữ nguyên code Insert cũ nếu cần dùng chức năng thêm phòng trong tương lai)
            // Hiện tại tập trung vào UpdateTrangThaiFull
        }

        public void Update(Room room)
        {
            // (Giữ nguyên code Update admin cũ)
        }

        public void Delete(int phongId)
        {
            // (Giữ nguyên)
        }

        // Cập nhật trạng thái + ghi chú + thời gian + kiểu thuê + tên khách
        public void UpdateTrangThaiFull(int phongId,
                                        int trangThai,
                                        string ghiChu,
                                        DateTime? thoiGianBatDau,
                                        int? kieuThue,
                                        string tenKhachHienThi)
        {
            using (SqlConnection conn = DbHelper.GetConnection())
            {
                string query = @"UPDATE PHONG SET
                                    TrangThai       = @TrangThai,
                                    GhiChu          = @GhiChu,
                                    ThoiGianBatDau  = @ThoiGianBatDau,
                                    KieuThue        = @KieuThue,
                                    TenKhachHienThi = @TenKhachHienThi
                                 WHERE PhongID = @PhongID";

                using (SqlCommand cmd = new SqlCommand(query, conn))
                {
                    cmd.Parameters.AddWithValue("@TrangThai", trangThai);

                    if (string.IsNullOrWhiteSpace(ghiChu))
                        cmd.Parameters.AddWithValue("@GhiChu", DBNull.Value);
                    else
                        cmd.Parameters.AddWithValue("@GhiChu", ghiChu);

                    if (thoiGianBatDau.HasValue)
                        cmd.Parameters.AddWithValue("@ThoiGianBatDau", thoiGianBatDau.Value);
                    else
                        cmd.Parameters.AddWithValue("@ThoiGianBatDau", DBNull.Value);

                    if (kieuThue.HasValue)
                        cmd.Parameters.AddWithValue("@KieuThue", kieuThue.Value);
                    else
                        cmd.Parameters.AddWithValue("@KieuThue", DBNull.Value);

                    if (string.IsNullOrWhiteSpace(tenKhachHienThi))
                        cmd.Parameters.AddWithValue("@TenKhachHienThi", DBNull.Value);
                    else
                        cmd.Parameters.AddWithValue("@TenKhachHienThi", tenKhachHienThi);

                    cmd.Parameters.AddWithValue("@PhongID", phongId);

                    cmd.ExecuteNonQuery();
                }
            }
        }
    }
}

================================================================================================
FILE PATH: Data\UserDAL.cs
================================================================================================
using System.Data.SqlClient;
using HotelManagement.Models;

namespace HotelManagement.Data
{
    public class UserDAL
    {
        public User Login(string username, string password)
        {
            using (SqlConnection conn = DbHelper.GetConnection())
            {
                string query = @"SELECT UserID, Username, [Password], [Role]
                                 FROM USERS
                                 WHERE Username = @Username AND [Password] = @Password";
                SqlCommand cmd = new SqlCommand(query, conn);
                cmd.Parameters.AddWithValue("@Username", username);
                cmd.Parameters.AddWithValue("@Password", password);

                SqlDataReader reader = cmd.ExecuteReader();
                if (reader.Read())
                {
                    return new User
                    {
                        UserID = reader.GetInt32(0),
                        Username = reader.GetString(1),
                        Password = reader.GetString(2),
                        Role = reader.GetString(3)
                    };
                }
            }
            return null; // không tìm thấy -> đăng nhập sai
        }
    }
}


================================================================================================
FILE PATH: Forms\LoginForm.cs
================================================================================================
using System;
using System.Windows.Forms;
using HotelManagement.Data;
using HotelManagement.Models;

namespace HotelManagement.Forms
{
    public partial class LoginForm : Form
    {
        private readonly UserDAL userDal = new UserDAL();

        // Thuộc tính để MainForm đọc thông tin user sau khi đăng nhập
        public User LoggedInUser { get; private set; }

        public LoginForm()
        {
            InitializeComponent();
        }

        private void btnLogin_Click(object sender, EventArgs e)
        {
            string username = txtUsername.Text.Trim();
            string password = txtPassword.Text;

            if (string.IsNullOrEmpty(username) || string.IsNullOrEmpty(password))
            {
                MessageBox.Show("Vui lòng nhập đầy đủ tên đăng nhập và mật khẩu");
                return;
            }

            User user = userDal.Login(username, password);
            if (user == null)
            {
                MessageBox.Show("Đăng nhập thất bại, sai tên đăng nhập hoặc mật khẩu");
                return;
            }

            // Đăng nhập thành công: lưu lại user & trả về DialogResult.OK
            LoggedInUser = user;
            this.DialogResult = DialogResult.OK;
            this.Close();
        }

        private void btnExit_Click(object sender, EventArgs e)
        {
            // Chỉ đóng dialog, không tắt toàn bộ ứng dụng
            this.DialogResult = DialogResult.Cancel;
            this.Close();
        }
    }
}


================================================================================================
FILE PATH: Forms\LoginForm.Designer.cs
================================================================================================
using System.Windows.Forms;

namespace HotelManagement.Forms
{
    partial class LoginForm
    {
        private System.ComponentModel.IContainer components = null;
        private Label lblUsername;
        private Label lblPassword;
        private TextBox txtUsername;
        private TextBox txtPassword;
        private Button btnLogin;
        private Button btnExit;

        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
                components.Dispose();
            base.Dispose(disposing);
        }

        private void InitializeComponent()
        {
            this.lblUsername = new Label();
            this.lblPassword = new Label();
            this.txtUsername = new TextBox();
            this.txtPassword = new TextBox();
            this.btnLogin = new Button();
            this.btnExit = new Button();
            this.SuspendLayout();
            // 
            // lblUsername
            // 
            this.lblUsername.AutoSize = true;
            this.lblUsername.Location = new System.Drawing.Point(30, 30);
            this.lblUsername.Name = "lblUsername";
            this.lblUsername.Size = new System.Drawing.Size(96, 15);
            this.lblUsername.TabIndex = 0;
            this.lblUsername.Text = "Tên đăng nhập:";
            // 
            // txtUsername
            // 
            this.txtUsername.Location = new System.Drawing.Point(140, 27);
            this.txtUsername.Name = "txtUsername";
            this.txtUsername.Size = new System.Drawing.Size(180, 23);
            this.txtUsername.TabIndex = 1;
            // 
            // lblPassword
            // 
            this.lblPassword.AutoSize = true;
            this.lblPassword.Location = new System.Drawing.Point(30, 70);
            this.lblPassword.Name = "lblPassword";
            this.lblPassword.Size = new System.Drawing.Size(59, 15);
            this.lblPassword.TabIndex = 2;
            this.lblPassword.Text = "Mật khẩu:";
            // 
            // txtPassword
            // 
            this.txtPassword.Location = new System.Drawing.Point(140, 67);
            this.txtPassword.Name = "txtPassword";
            this.txtPassword.PasswordChar = '*';
            this.txtPassword.Size = new System.Drawing.Size(180, 23);
            this.txtPassword.TabIndex = 3;
            // 
            // btnLogin
            // 
            this.btnLogin.Location = new System.Drawing.Point(140, 110);
            this.btnLogin.Name = "btnLogin";
            this.btnLogin.Size = new System.Drawing.Size(80, 27);
            this.btnLogin.TabIndex = 4;
            this.btnLogin.Text = "Đăng nhập";
            this.btnLogin.UseVisualStyleBackColor = true;
            this.btnLogin.Click += new System.EventHandler(this.btnLogin_Click);
            // 
            // btnExit
            // 
            this.btnExit.Location = new System.Drawing.Point(240, 110);
            this.btnExit.Name = "btnExit";
            this.btnExit.Size = new System.Drawing.Size(80, 27);
            this.btnExit.TabIndex = 5;
            this.btnExit.Text = "Thoát";
            this.btnExit.UseVisualStyleBackColor = true;
            this.btnExit.Click += new System.EventHandler(this.btnExit_Click);
            // 
            // LoginForm
            // 
            this.AcceptButton = this.btnLogin;
            this.ClientSize = new System.Drawing.Size(364, 161);
            this.Controls.Add(this.btnExit);
            this.Controls.Add(this.btnLogin);
            this.Controls.Add(this.txtPassword);
            this.Controls.Add(this.lblPassword);
            this.Controls.Add(this.txtUsername);
            this.Controls.Add(this.lblUsername);
            this.FormBorderStyle = FormBorderStyle.FixedDialog;
            this.MaximizeBox = false;
            this.MinimizeBox = false;
            this.Name = "LoginForm";
            this.StartPosition = FormStartPosition.CenterScreen;
            this.Text = "Đăng nhập";
            this.ResumeLayout(false);
            this.PerformLayout();
        }
    }
}


================================================================================================
FILE PATH: Forms\MainForm.cs
================================================================================================
using System;
using System.Collections.Generic;
using System.Drawing;
using System.Linq;
using System.Text.RegularExpressions;
using System.Windows.Forms;
using HotelManagement.Data;
using HotelManagement.Models;

namespace HotelManagement.Forms
{
    public partial class MainForm : Form
    {
        private User _currentUser;
        private readonly RoomDAL _roomDal = new RoomDAL();

        // null = tất cả; 0..3 = theo trạng thái
        private int? _currentFilterStatus = null;

        // placeholder search
        private readonly Color _placeholderColor = Color.Gray;
        private readonly Color _normalColor = Color.Black;
        private const string _placeholderText = "Nhập từ khóa tìm kiếm";

        // Timer update đồng hồ thời gian
        private Timer _roomTimer;

        // ====== HẰNG SỐ GIÁ ======
        // Phòng đơn: LoaiPhongID = 1
        // Phòng đôi : LoaiPhongID = 2
        private const decimal GIA_DEM_DON_SAU_18 = 200000m;
        private const decimal GIA_DEM_DON_TRUOC_18 = 250000m;
        private const decimal GIA_DEM_DON_NHIEU = 250000m;

        private const decimal GIA_DEM_DOI_SAU_18 = 300000m;
        private const decimal GIA_DEM_DOI_TRUOC_18 = 350000m;
        private const decimal GIA_DEM_DOI_NHIEU = 350000m;

        private const decimal GIA_GIO_DON_DAU = 70000m;
        private const decimal GIA_GIO_DON_SAU = 20000m;

        private const decimal GIA_GIO_DOI_DAU = 120000m;
        private const decimal GIA_GIO_DOI_SAU = 30000m;

        private const decimal GIA_NUOC_NGOT = 20000m;
        private const decimal GIA_NUOC_SUOI = 10000m;

        private const decimal PHU_THU_TRA_TRE = 40000m;

        // Lưu các nhãn trong card phòng để tick timer cập nhật
        private class RoomTileInfo
        {
            public Room Room { get; set; }
            public Label LblStartTime { get; set; } // dòng trên
            public Label LblCenter { get; set; }    // dòng giữa
            public Label LblElapsed { get; set; }   // dòng dưới
        }

        public MainForm()
        {
            InitializeComponent();

            // user mặc định (khách)
            _currentUser = new User { Username = "Khách", Role = "Letan" };
        }

        public MainForm(User user) : this()
        {
            if (user != null) _currentUser = user;
        }

        private void MainForm_Load(object sender, EventArgs e)
        {
            UpdateUserUI();
            InitSearchPlaceholder();
            LoadRoomTiles();
            SetupRoomTimer();
        }

        // được gán trong Designer: this.Resize += MainForm_Resize;
        private void MainForm_Resize(object sender, EventArgs e)
        {
            // khi thay đổi kích thước cửa sổ thì vẽ lại tiles với size mới
            LoadRoomTiles();
        }

        // được gán trong Designer: flowRooms.ControlAdded += flowRooms_ControlAdded;
        private void flowRooms_ControlAdded(object sender, ControlEventArgs e)
        {
            // đảm bảo mỗi panel tầng full-width theo flowRooms
            if (e.Control is Panel panelTang)
            {
                int panelWidth = Math.Max(300, flowRooms.ClientSize.Width - 20);
                panelTang.Width = panelWidth;
            }
        }

        private void UpdateUserUI()
        {
            lblCurrentUser.Text = $"Người dùng: {_currentUser.Username} ({_currentUser.Role})";
            btnReports.Enabled = _currentUser.Role == "Admin";
        }

        #region Search placeholder

        private void InitSearchPlaceholder()
        {
            if (string.IsNullOrWhiteSpace(txtSearch.Text))
            {
                txtSearch.Text = _placeholderText;
                txtSearch.ForeColor = _placeholderColor;
            }
        }
        private void txtSearch_GotFocus(object sender, EventArgs e)
        {
            if (txtSearch.ForeColor == _placeholderColor)
            {
                txtSearch.Text = "";
                txtSearch.ForeColor = _normalColor;
            }
        }
        private void txtSearch_LostFocus(object sender, EventArgs e)
        {
            if (string.IsNullOrWhiteSpace(txtSearch.Text))
            {
                txtSearch.Text = _placeholderText;
                txtSearch.ForeColor = _placeholderColor;
            }
        }
        private void txtSearch_KeyDown(object sender, KeyEventArgs e)
        {
            if (txtSearch.ForeColor == _placeholderColor) return;
            if (e.KeyCode != Keys.Enter) return;

            string keyword = txtSearch.Text.Trim().ToLower();
            foreach (Control c in flowRooms.Controls)
            {
                if (c is Panel panelTang)
                {
                    bool anyVisible = false;
                    foreach (Control child in panelTang.Controls)
                    {
                        if (child is FlowLayoutPanel flp)
                        {
                            foreach (Control roomCard in flp.Controls)
                            {
                                if (roomCard is Panel roomPanel)
                                {
                                    string allText = string.Join(" ",
                                        roomPanel.Controls.OfType<Control>()
                                                 .SelectMany(k => Flatten(k))
                                                 .Select(k => k.Text.ToLower()));
                                    bool visible = string.IsNullOrEmpty(keyword) || allText.Contains(keyword);
                                    roomPanel.Visible = visible;
                                    if (visible) anyVisible = true;
                                }
                            }
                        }
                    }
                    panelTang.Visible = anyVisible || string.IsNullOrEmpty(keyword);
                }
            }

            IEnumerable<Control> Flatten(Control ctrl)
            {
                yield return ctrl;
                foreach (Control ch in ctrl.Controls)
                    foreach (var x in Flatten(ch)) yield return x;
            }
        }

        #endregion

        #region Sơ đồ phòng

        private (int width, int height, int leftCol) CalcTileSize()
        {
            // 3 cột trên desktop, 2 khi hẹp
            int w = flowRooms.ClientSize.Width;
            if (w <= 0) w = this.ClientSize.Width - panelLeft.Width - 40;

            int cols = w < 900 ? 2 : 3;
            int tileW = Math.Max(300, (w - 40 - (cols - 1) * 24) / cols);
            int tileH = Math.Max(100, (int)(tileW * 0.38));
            int leftCol = Math.Min(100, Math.Max(80, tileW / 3));
            return (tileW, tileH, leftCol);
        }

        private void LoadRoomTiles()
        {
            flowRooms.SuspendLayout();
            flowRooms.Controls.Clear();

            var rooms = _roomDal.GetAll();
            if (_currentFilterStatus.HasValue)
                rooms = rooms.FindAll(r => r.TrangThai == _currentFilterStatus.Value);

            var tangGroups = rooms.GroupBy(r => r.Tang).OrderBy(g => g.Key);

            foreach (var group in tangGroups)
            {
                var panelTang = BuildFloorPanel(group.Key, group.ToList());
                flowRooms.Controls.Add(panelTang);
            }

            flowRooms.ResumeLayout();

            if (_roomTimer != null)
                RoomTimer_Tick(this, EventArgs.Empty);
        }

        private Panel BuildFloorPanel(int tang, List<Room> roomsInFloor)
        {
            var (tileW, tileH, _) = CalcTileSize();

            // chiều rộng khung tầng = toàn bộ vùng hiển thị trừ margin
            int panelWidth = Math.Max(300, flowRooms.ClientSize.Width - 20);

            Panel panelTang = new Panel
            {
                Width = panelWidth,
                Margin = new Padding(10, 5, 10, 10),
                BackColor = Color.White
            };

            // header
            var header = new Panel
            {
                Height = 30,
                Dock = DockStyle.Top,
                BackColor = Color.White
            };
            var accent = new Panel
            {
                Width = 4,
                Height = 20,
                BackColor = Color.FromArgb(63, 81, 181),
                Location = new Point(0, 5)
            };
            var lbl = new Label
            {
                AutoSize = true,
                Font = new Font("Segoe UI Semibold", 10.5F, FontStyle.Bold),
                ForeColor = Color.FromArgb(55, 71, 79),
                Text = $"Tầng {tang}",
                Location = new Point(10, 5)
            };
            header.Controls.Add(accent);
            header.Controls.Add(lbl);
            panelTang.Controls.Add(header);

            // Nhãn + dòng Phòng đơn
            var lblDon = new Label
            {
                AutoSize = true,
                Font = new Font("Segoe UI", 9F, FontStyle.Bold),
                ForeColor = Color.Gray,
                Text = "Phòng đơn",
                Location = new Point(10, 35)
            };

            var flowDon = new FlowLayoutPanel
            {
                Name = "flowDon",
                Location = new Point(10, 55),
                Width = panelTang.Width - 20,
                Height = tileH + 16,
                AutoScroll = false,
                WrapContents = false,
                FlowDirection = FlowDirection.LeftToRight
            };

            // Nhãn + dòng Phòng đôi
            var lblDoi = new Label
            {
                AutoSize = true,
                Font = new Font("Segoe UI", 9F, FontStyle.Bold),
                ForeColor = Color.Gray,
                Text = "Phòng đôi",
                Location = new Point(10, 55 + tileH + 50)
            };

            var flowDoi = new FlowLayoutPanel
            {
                Name = "flowDoi",
                Location = new Point(10, 75 + tileH + 50),
                Width = panelTang.Width - 20,
                Height = tileH + 16,
                AutoScroll = false,
                WrapContents = false,
                FlowDirection = FlowDirection.LeftToRight
            };

            foreach (var room in roomsInFloor.OrderBy(r => r.MaPhong))
            {
                var tile = CreateRoomTile(room);
                tile.Width = tileW;
                tile.Height = tileH;

                if (room.LoaiPhongID == 1)
                    flowDon.Controls.Add(tile);
                else
                    flowDoi.Controls.Add(tile);
            }

            panelTang.Controls.Add(lblDon);
            panelTang.Controls.Add(flowDon);
            panelTang.Controls.Add(lblDoi);
            panelTang.Controls.Add(flowDoi);

            // Chiều cao khung tầng = đáy của dòng phòng đôi + margin nhỏ
            panelTang.Height = flowDoi.Bottom + 20;

            return panelTang;
        }

        private Color GetRoomBackColor(int st)
        {
            switch (st)
            {
                case 0: return Color.FromArgb(76, 175, 80);   // Trống
                case 1: return Color.FromArgb(33, 150, 243);  // Có khách
                case 2: return Color.FromArgb(244, 67, 54);   // Chưa dọn
                case 3: return Color.FromArgb(255, 152, 0);   // Đã đặt
                default: return Color.FromArgb(158, 158, 158);
            }
        }
        private string GetStatusIcon(int st)
        {
            switch (st)
            {
                case 0: return "✔";
                case 1: return "🛏";
                case 2: return "🧹";
                case 3: return "📅";
                default: return "";
            }
        }

        // Đọc/ghi tag KEY=VALUE trong ghi chú
        private static int GetIntTag(string text, string key, int defaultVal = 0)
        {
            if (string.IsNullOrEmpty(text)) return defaultVal;
            var m = Regex.Match(text, @"\b" + key + @"\s*=\s*(\d+)", RegexOptions.IgnoreCase);
            if (m.Success && int.TryParse(m.Groups[1].Value, out int v))
                return v;
            return defaultVal;
        }
        private static decimal GetDecimalTag(string text, string key, decimal defaultVal = 0m)
        {
            if (string.IsNullOrEmpty(text)) return defaultVal;
            var m = Regex.Match(text, @"\b" + key + @"\s*=\s*(\d+)", RegexOptions.IgnoreCase);
            if (m.Success && decimal.TryParse(m.Groups[1].Value, out decimal v))
                return v;
            return defaultVal;
        }
        private static string RemoveSystemTags(string text)
        {
            if (string.IsNullOrEmpty(text)) return "";
            string pattern = @"(\s*\|\s*)?(SL|NN|NS|DT)\s*=\s*[^|]*";
            string result = Regex.Replace(text, pattern, "", RegexOptions.IgnoreCase).Trim();
            if (result.EndsWith("|")) result = result.TrimEnd('|').Trim();
            return result;
        }

        private static string CombineCenter(string main, string remain, string note)
        {
            // 2–3 dòng: nội dung chính + dòng phụ + note
            if (!string.IsNullOrWhiteSpace(remain))
                main = main + "\n" + remain;
            if (!string.IsNullOrWhiteSpace(note))
                main = main + "\n" + note;
            return main;
        }

        private decimal TinhTienDemForRoom(Room room, DateTime start, int soDem)
        {
            if (soDem <= 0) return 0m;

            bool laPhongDon = room.LoaiPhongID == 1;
            decimal tong = 0m;

            if (soDem == 1)
            {
                bool sau18h = start.TimeOfDay >= new TimeSpan(18, 0, 0);
                if (laPhongDon)
                    tong = sau18h ? GIA_DEM_DON_SAU_18 : GIA_DEM_DON_TRUOC_18;
                else
                    tong = sau18h ? GIA_DEM_DOI_SAU_18 : GIA_DEM_DOI_TRUOC_18;
            }
            else
            {
                decimal giaMoiDem = laPhongDon ? GIA_DEM_DON_NHIEU : GIA_DEM_DOI_NHIEU;
                tong = giaMoiDem * soDem;
            }

            // Phụ thu trả trễ (sau 12h trưa ngày trả chuẩn)
            DateTime now = DateTime.Now;
            DateTime ngayTraChuan = start.Date.AddDays(soDem).AddHours(12);
            if (now > ngayTraChuan)
                tong += PHU_THU_TRA_TRE;

            return tong;
        }

        /// <summary>
        /// Dòng phụ hiển thị dưới tên khách: còn đêm & tiền chưa thu (đêm) hoặc tổng phải thu (giờ).
        /// </summary>
        private string CalcExtraText(Room room)
        {
            if (room.TrangThai != 1 || !room.ThoiGianBatDau.HasValue || !room.KieuThue.HasValue)
                return null;

            int kieu = room.KieuThue.Value;
            DateTime start = room.ThoiGianBatDau.Value;

            // ĐÊM
            if (kieu == 1)
            {
                int soDem = GetIntTag(room.GhiChu, "SL", 1);
                if (soDem <= 0) soDem = 1;

                decimal tienPhong = TinhTienDemForRoom(room, start, soDem);

                int nn = GetIntTag(room.GhiChu, "NN", 0);
                int ns = GetIntTag(room.GhiChu, "NS", 0);
                decimal tienNuoc = nn * GIA_NUOC_NGOT + ns * GIA_NUOC_SUOI;

                decimal daThu = GetDecimalTag(room.GhiChu, "DT", 0m);
                decimal conLai = Math.Max(0, tienPhong + tienNuoc - daThu);

                DateTime end = start.Date.AddDays(soDem);
                TimeSpan left = end - DateTime.Now;
                int nightsLeft = (int)Math.Ceiling(left.TotalDays);
                string line1 = nightsLeft <= 0 ? "Quá hạn" : "Còn " + nightsLeft + " đêm";
                string line2 = "Chưa thu: " + conLai.ToString("N0") + " đ";

                return line1 + "\n" + line2;
            }

            // GIỜ – hiển thị tổng phải thu (tiền phòng + nước - đã thu)
            if (kieu == 3)
            {
                DateTime now = DateTime.Now;
                if (now < start) now = start;

                TimeSpan diff = now - start;
                int soGio = Math.Max(1, (int)Math.Ceiling(diff.TotalHours));

                bool laPhongDon = room.LoaiPhongID == 1;
                decimal giaGioDau = laPhongDon ? GIA_GIO_DON_DAU : GIA_GIO_DOI_DAU;
                decimal giaGioSau = laPhongDon ? GIA_GIO_DON_SAU : GIA_GIO_DOI_SAU;

                decimal tienPhong = (soGio <= 1)
                    ? giaGioDau
                    : giaGioDau + (soGio - 1) * giaGioSau;

                int nn = GetIntTag(room.GhiChu, "NN", 0);
                int ns = GetIntTag(room.GhiChu, "NS", 0);
                decimal tienNuoc = nn * GIA_NUOC_NGOT + ns * GIA_NUOC_SUOI;

                decimal daThu = GetDecimalTag(room.GhiChu, "DT", 0m);
                decimal conLai = Math.Max(0, tienPhong + tienNuoc - daThu);

                return "Phải thu: " + conLai.ToString("N0") + " đ";
            }

            return null;
        }

        private Panel CreateRoomTile(Room room)
        {
            var (tileW, tileH, leftCol) = CalcTileSize();

            Color baseColor = GetRoomBackColor(room.TrangThai);
            Color lightColor = ControlPaint.Light(baseColor, 0.80f);
            // chữ “cùng tông nhưng đậm hơn nền”
            Color textColor = ControlPaint.Dark(baseColor, 0.20f);

            var panel = new Panel
            {
                Width = tileW,
                Height = tileH,
                Margin = new Padding(12, 8, 12, 8),
                BackColor = Color.White
            };
            panel.Paint += (s, e) =>
            {
                using (var pen = new Pen(Color.FromArgb(210, 210, 210)))
                    e.Graphics.DrawRectangle(pen, 0, 0, panel.Width - 1, panel.Height - 1);
            };

            // Cột trái
            var leftPanel = new Panel { Width = leftCol, Dock = DockStyle.Left, BackColor = baseColor, Padding = new Padding(0, 6, 0, 6) };

            var lblStd = new Label
            {
                Dock = DockStyle.Top,
                Height = 18,
                TextAlign = ContentAlignment.MiddleCenter,
                Font = new Font("Segoe UI", 7.5f, FontStyle.Bold),
                ForeColor = Color.White,
                Text = "STD"
            };

            var lblIcon = new Label
            {
                Dock = DockStyle.Bottom,
                Height = 22,
                TextAlign = ContentAlignment.MiddleCenter,
                Font = new Font("Segoe UI", 11F, FontStyle.Bold),
                ForeColor = Color.White,
                Text = GetStatusIcon(room.TrangThai)
            };

            var lblCode = new Label
            {
                Dock = DockStyle.Fill,
                TextAlign = ContentAlignment.MiddleCenter,
                Font = new Font("Segoe UI Semibold", 16F, FontStyle.Bold),
                ForeColor = Color.White,
                Text = room.MaPhong
            };

            leftPanel.Controls.Add(lblCode);
            leftPanel.Controls.Add(lblIcon);
            leftPanel.Controls.Add(lblStd);

            // Cột phải
            var rightPanel = new Panel { Dock = DockStyle.Fill, BackColor = lightColor, Padding = new Padding(6) };

            var lblStartTime = new Label
            {
                Height = 18,
                Dock = DockStyle.Top,
                TextAlign = ContentAlignment.MiddleCenter,
                Font = new Font("Segoe UI", 8F),
                ForeColor = Color.FromArgb(120, 0, 0, 0),
                Name = "lblStartTime"
            };

            var lblCenter = new Label
            {
                Dock = DockStyle.Fill,
                TextAlign = ContentAlignment.MiddleCenter,
                AutoSize = false,
                Font = new Font("Segoe UI", 12.5f, FontStyle.Bold),
                ForeColor = textColor,
                Name = "lblCenter"
            };

            var lblElapsed = new Label
            {
                Height = 20,
                Dock = DockStyle.Bottom,
                TextAlign = ContentAlignment.BottomCenter,
                Font = new Font("Segoe UI", 9F, FontStyle.Bold),
                ForeColor = Color.FromArgb(120, 0, 0, 0),
                Name = "lblElapsed"
            };

            rightPanel.Controls.Add(lblCenter);
            rightPanel.Controls.Add(lblElapsed);
            rightPanel.Controls.Add(lblStartTime);

            panel.Controls.Add(rightPanel);
            panel.Controls.Add(leftPanel);

            // Tooltip ghi chú (nếu có – chỉ phần note, bỏ tag hệ thống)
            if (!string.IsNullOrWhiteSpace(room.GhiChu))
            {
                var tip = new ToolTip();
                tip.SetToolTip(panel, RemoveSystemTags(room.GhiChu));
            }

            // hover
            panel.MouseEnter += (s, e) => panel.BackColor = Color.FromArgb(250, 250, 250);
            panel.MouseLeave += (s, e) => panel.BackColor = Color.White;

            // click / double click hành vi theo trạng thái
            void AttachClick(Control c)
            {
                c.Cursor = Cursors.Hand;

                if (room.TrangThai == 2) // Chưa dọn: single click không làm gì, double click -> Trống
                {
                    c.Click += (s, e) => { /* ignore */ };
                    c.DoubleClick += (s, e) => SetRoomFromDirtyToEmpty(room);
                }
                else
                {
                    // Trống / Có khách / Đã đặt: single click mở chi tiết
                    c.Click += (s, e) => ShowRoomDetail(room);
                }

                foreach (Control k in c.Controls) AttachClick(k);
            }
            AttachClick(panel);

            // text ban đầu
            string center;
            switch (room.TrangThai)
            {
                case 0:
                    center = "Trống";
                    break;
                case 2:
                    center = "Chưa dọn";
                    break;
                case 3:
                    center = "Đã có khách đặt";
                    break;
                case 1:
                    center = room.TenKhachHienThi ?? "";
                    break;
                default:
                    center = "";
                    break;
            }

            string extra = CalcExtraText(room);
            string note = (room.TrangThai == 1 && !string.IsNullOrWhiteSpace(room.GhiChu) &&
                           !string.IsNullOrWhiteSpace(RemoveSystemTags(room.GhiChu)))
                          ? "(Có ghi chú)"
                          : null;

            lblCenter.Text = CombineCenter(center, extra, note);

            // Lưu info cho Timer
            var info = new RoomTileInfo
            {
                Room = room,
                LblStartTime = lblStartTime,
                LblCenter = lblCenter,
                LblElapsed = lblElapsed
            };
            panel.Tag = info;

            return panel;
        }

        private void SetRoomFromDirtyToEmpty(Room room)
        {
            // từ "Chưa dọn" -> "Trống" khi double click
            room.TrangThai = 0;
            room.ThoiGianBatDau = null;
            room.KieuThue = null;
            room.TenKhachHienThi = null;

            string ghiChu = RemoveSystemTags(room.GhiChu);

            _roomDal.UpdateTrangThaiFull(
                room.PhongID,
                room.TrangThai,
                ghiChu,
                null,
                null,
                null);

            room.GhiChu = ghiChu;

            LoadRoomTiles();
        }

        #endregion

        #region Timer cập nhật thời gian

        private void SetupRoomTimer()
        {
            if (_roomTimer != null) return;
            _roomTimer = new Timer { Interval = 1000 };
            _roomTimer.Tick += RoomTimer_Tick;
            _roomTimer.Start();
        }

        private void RoomTimer_Tick(object sender, EventArgs e)
        {
            foreach (Control floor in flowRooms.Controls)
            {
                if (floor is Panel panelTang)
                {
                    foreach (Control child in panelTang.Controls.OfType<FlowLayoutPanel>())
                    {
                        foreach (Control roomPanel in child.Controls)
                        {
                            Panel p = roomPanel as Panel;
                            if (p != null)
                            {
                                RoomTileInfo info = p.Tag as RoomTileInfo;
                                if (info != null)
                                {
                                    UpdateRoomTileTime(info);
                                }
                                else
                                {
                                    Room r = p.Tag as Room;
                                    if (r != null)
                                    {
                                        var info2 = new RoomTileInfo
                                        {
                                            Room = r,
                                            LblStartTime = FindByName<Label>(p, "lblStartTime"),
                                            LblCenter = FindByName<Label>(p, "lblCenter"),
                                            LblElapsed = FindByName<Label>(p, "lblElapsed"),
                                        };
                                        p.Tag = info2;
                                        UpdateRoomTileTime(info2);
                                    }
                                }
                            }
                        }
                    }
                }
            }

            // hàm phụ trợ tìm control theo Name
            T FindByName<T>(Control root, string name) where T : Control
            {
                foreach (Control c in Flatten(root))
                {
                    T t = c as T;
                    if (t != null && t.Name == name) return t;
                }
                return null;
            }

            IEnumerable<Control> Flatten(Control c)
            {
                yield return c;
                foreach (Control k in c.Controls)
                    foreach (Control x in Flatten(k))
                        yield return x;
            }
        }

        private void UpdateRoomTileTime(RoomTileInfo info)
        {
            Room r = info.Room;
            if (r.TrangThai == 1 && r.ThoiGianBatDau.HasValue)
            {
                DateTime start = r.ThoiGianBatDau.Value;
                DateTime now = DateTime.Now;

                info.LblStartTime.Text = start.ToString("dd/MM/yyyy, HH:mm");

                string main = (r.KieuThue == 3) ? "" : (r.TenKhachHienThi ?? "");
                string extra = CalcExtraText(r);
                string note = (!string.IsNullOrWhiteSpace(r.GhiChu) &&
                               !string.IsNullOrWhiteSpace(RemoveSystemTags(r.GhiChu)))
                              ? "(Có ghi chú)"
                              : null;

                if (string.IsNullOrWhiteSpace(main))
                    main = "Có khách";

                info.LblCenter.Text = CombineCenter(main, extra, note);

                TimeSpan diff = now - start;
                if (diff.TotalSeconds < 0) diff = TimeSpan.Zero;
                info.LblElapsed.Text = string.Format("{0:00} : {1:00} : {2:00}",
                    (int)diff.TotalHours, diff.Minutes, diff.Seconds);
            }
            else
            {
                info.LblStartTime.Text = "";
                info.LblElapsed.Text = "";

                string text;
                switch (r.TrangThai)
                {
                    case 0:
                        text = "Trống";
                        break;
                    case 2:
                        text = "Chưa dọn";
                        break;
                    case 3:
                        text = "Đã có khách đặt";
                        break;
                    default:
                        text = "";
                        break;
                }
                info.LblCenter.Text = text;
            }
        }

        #endregion

        #region Điều hướng/forms

        private void ShowRoomDetail(Room room)
        {
            // Khi phòng đang TRỐNG được click:
            // -> MẶC ĐỊNH chuyển sang thuê GIỜ + Có khách + bắt đầu tính giờ (chỉ trong RAM)
            if (room.TrangThai == 0)
            {
                room.TrangThai = 1;
                room.KieuThue = 3;
                room.ThoiGianBatDau = DateTime.Now;
                room.TenKhachHienThi = null;
            }

            flowRooms.Visible = false;
            panelFilter.Visible = false;
            panelDetailHost.Controls.Clear();

            var detail = new RoomDetailForm(room)
            {
                TopLevel = false,
                FormBorderStyle = FormBorderStyle.None,
                Dock = DockStyle.Fill
            };

            detail.BackRequested += (s, e) =>
            {
                panelDetailHost.Visible = false;
                panelDetailHost.Controls.Clear();
                panelFilter.Visible = true;
                flowRooms.Visible = true;
                LoadRoomTiles();
            };

            detail.Saved += (s, e) =>
            {
                var updated = _roomDal.GetById(room.PhongID);
                if (updated != null)
                    room = updated;

                LoadRoomTiles();
            };

            panelDetailHost.Visible = true;
            panelDetailHost.Controls.Add(detail);
            panelDetailHost.BringToFront();
            detail.Show();
        }

        private void btnRooms_Click(object sender, EventArgs e)
        {
            panelDetailHost.Visible = false;
            panelDetailHost.Controls.Clear();
            panelFilter.Visible = true;
            flowRooms.Visible = true;
            LoadRoomTiles();
        }
        private void btnReports_Click(object sender, EventArgs e)
        {
            MessageBox.Show("Chức năng báo cáo sẽ được bổ sung sau.", "Thông báo");
        }
        private void btnAdmin_Click(object sender, EventArgs e)
        {
            using (var login = new LoginForm())
            {
                if (login.ShowDialog(this) == DialogResult.OK && login.LoggedInUser != null)
                {
                    _currentUser = login.LoggedInUser;
                    UpdateUserUI();
                    MessageBox.Show("Xin chào: " + _currentUser.Username, "Đăng nhập thành công");
                }
            }
        }
        private void btnExit_Click(object sender, EventArgs e)
        {
            this.Close();
        }

        private void btnFilterAll_Click(object sender, EventArgs e) { _currentFilterStatus = null; LoadRoomTiles(); }
        private void btnFilterTrong_Click(object sender, EventArgs e) { _currentFilterStatus = 0; LoadRoomTiles(); }
        private void btnFilterCoKhach_Click(object sender, EventArgs e) { _currentFilterStatus = 1; LoadRoomTiles(); }
        private void btnFilterChuaDon_Click(object sender, EventArgs e) { _currentFilterStatus = 2; LoadRoomTiles(); }
        private void btnFilterDaDat_Click(object sender, EventArgs e) { _currentFilterStatus = 3; LoadRoomTiles(); }

        #endregion
    }
}


================================================================================================
FILE PATH: Forms\MainForm.Designer.cs
================================================================================================
using System.Windows.Forms;
using System.Drawing;

namespace HotelManagement.Forms
{
    partial class MainForm
    {
        private System.ComponentModel.IContainer components = null;

        private Panel panelTop;
        private Panel panelLeft;
        private Panel panelFilter;
        private FlowLayoutPanel flowRooms;
        private Panel panelDetailHost;

        private Button btnAdmin;
        private Button btnExit;
        private Label lblTitle;
        private TextBox txtSearch;

        private Button btnSoDoPhong;
        private Button btnThongKe;
        private Button btnReports;
        private Label lblCurrentUser;

        private Button btnFilterAll;
        private Button btnFilterTrong;
        private Button btnFilterCoKhach;
        private Button btnFilterChuaDon;
        private Button btnFilterDaDat;

        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null)) components.Dispose();
            base.Dispose(disposing);
        }

        private void InitializeComponent()
        {
            components = new System.ComponentModel.Container();

            // ===== FORM CHÍNH =====
            this.AutoScaleMode = AutoScaleMode.Font;
            this.ClientSize = new Size(1200, 750);
            this.Text = "Quản lý khách sạn";
            this.StartPosition = FormStartPosition.CenterScreen;
            this.BackColor = Color.FromArgb(245, 245, 245);
            this.MinimumSize = new Size(1000, 600);
            this.Load += new System.EventHandler(this.MainForm_Load);
            // gọi lại mỗi khi resize để co giãn khung tầng
            this.Resize += new System.EventHandler(this.MainForm_Resize);

            // ===== THANH TRÊN (TOP BAR) =====
            panelTop = new Panel
            {
                BackColor = Color.FromArgb(63, 81, 181),
                Dock = DockStyle.Top,
                Height = 60,
                Padding = new Padding(10, 10, 10, 10)
            };

            var topLayout = new TableLayoutPanel
            {
                Dock = DockStyle.Fill,
                ColumnCount = 3,
                RowCount = 1
            };
            topLayout.ColumnStyles.Add(new ColumnStyle(SizeType.AutoSize));
            topLayout.ColumnStyles.Add(new ColumnStyle(SizeType.Percent, 100f));
            topLayout.ColumnStyles.Add(new ColumnStyle(SizeType.AutoSize));

            var panelTopLeft = new FlowLayoutPanel
            {
                FlowDirection = FlowDirection.LeftToRight,
                WrapContents = false,
                Dock = DockStyle.Fill,
                Margin = new Padding(0),
                Padding = new Padding(0),
                AutoSize = true,
                AutoSizeMode = AutoSizeMode.GrowAndShrink
            };

            btnAdmin = new Button
            {
                FlatStyle = FlatStyle.Flat,
                ForeColor = Color.White,
                Font = new Font("Segoe UI", 9F, FontStyle.Bold),
                Text = "≡",
                Width = 40,
                Height = 40,
                Margin = new Padding(0, 0, 10, 0),
                TabStop = false
            };
            btnAdmin.FlatAppearance.BorderSize = 0;
            btnAdmin.Click += new System.EventHandler(this.btnAdmin_Click);

            lblTitle = new Label
            {
                AutoSize = true,
                ForeColor = Color.White,
                Font = new Font("Segoe UI Semibold", 12F, FontStyle.Bold),
                Text = "Thanh Long Hotel",
                Margin = new Padding(0, 8, 0, 0)
            };

            panelTopLeft.Controls.Add(btnAdmin);
            panelTopLeft.Controls.Add(lblTitle);

            txtSearch = new TextBox
            {
                Font = new Font("Segoe UI", 10F),
                Margin = new Padding(10, 8, 10, 8),
                Text = ""
            };
            txtSearch.Dock = DockStyle.Fill;
            txtSearch.KeyDown += new KeyEventHandler(this.txtSearch_KeyDown);
            txtSearch.GotFocus += new System.EventHandler(this.txtSearch_GotFocus);
            txtSearch.LostFocus += new System.EventHandler(this.txtSearch_LostFocus);

            btnExit = new Button
            {
                FlatStyle = FlatStyle.Flat,
                ForeColor = Color.White,
                Font = new Font("Segoe UI", 9F, FontStyle.Bold),
                Text = "Thoát",
                Width = 75,
                Height = 35,
                Margin = new Padding(0, 8, 0, 8)
            };
            btnExit.FlatAppearance.BorderSize = 0;
            btnExit.Click += new System.EventHandler(this.btnExit_Click);

            topLayout.Controls.Add(panelTopLeft, 0, 0);
            topLayout.Controls.Add(txtSearch, 1, 0);
            topLayout.Controls.Add(btnExit, 2, 0);

            panelTop.Controls.Add(topLayout);

            // ===== MENU TRÁI =====
            panelLeft = new Panel
            {
                BackColor = Color.FromArgb(248, 249, 252),
                Dock = DockStyle.Left,
                Width = 220,
                Padding = new Padding(0, 10, 0, 10)
            };

            btnSoDoPhong = MakeLeftButton("Sơ đồ phòng", 10);
            btnSoDoPhong.Click += new System.EventHandler(this.btnRooms_Click);

            btnThongKe = MakeLeftButton("Thống kê", 50);
            btnReports = MakeLeftButton("Báo cáo", 90);

            lblCurrentUser = new Label
            {
                Dock = DockStyle.Bottom,
                Height = 30,
                Font = new Font("Segoe UI", 9F),
                ForeColor = Color.Gray,
                TextAlign = ContentAlignment.MiddleLeft,
                Padding = new Padding(12, 0, 0, 0),
                Text = "Người dùng: (khách)"
            };

            panelLeft.Controls.Add(btnSoDoPhong);
            panelLeft.Controls.Add(btnThongKe);
            panelLeft.Controls.Add(btnReports);
            panelLeft.Controls.Add(lblCurrentUser);

            // ===== PANEL MAIN =====
            var panelMain = new Panel
            {
                Dock = DockStyle.Fill,
                BackColor = Color.FromArgb(245, 245, 245)
            };

            // ----- THANH FILTER -----
            panelFilter = new Panel
            {
                BackColor = Color.White,
                Dock = DockStyle.Top,
                Height = 60,
                Padding = new Padding(10)
            };

            var panelFilterInner = new FlowLayoutPanel
            {
                Dock = DockStyle.Fill,
                FlowDirection = FlowDirection.LeftToRight,
                WrapContents = false,
                AutoScroll = true
            };

            btnFilterAll = MakeFilter("Tất cả", Color.FromArgb(158, 158, 158));
            btnFilterAll.Click += new System.EventHandler(this.btnFilterAll_Click);

            btnFilterTrong = MakeFilter("Trống", Color.FromArgb(76, 175, 80));
            btnFilterTrong.Click += new System.EventHandler(this.btnFilterTrong_Click);

            btnFilterCoKhach = MakeFilter("Có khách", Color.FromArgb(33, 150, 243));
            btnFilterCoKhach.Click += new System.EventHandler(this.btnFilterCoKhach_Click);

            btnFilterChuaDon = MakeFilter("Chưa dọn", Color.FromArgb(96, 125, 139));
            btnFilterChuaDon.Click += new System.EventHandler(this.btnFilterChuaDon_Click);

            btnFilterDaDat = MakeFilter("Đã có khách đặt", Color.FromArgb(255, 152, 0));
            btnFilterDaDat.Click += new System.EventHandler(this.btnFilterDaDat_Click);

            panelFilterInner.Controls.Add(btnFilterAll);
            panelFilterInner.Controls.Add(btnFilterTrong);
            panelFilterInner.Controls.Add(btnFilterCoKhach);
            panelFilterInner.Controls.Add(btnFilterChuaDon);
            panelFilterInner.Controls.Add(btnFilterDaDat);

            panelFilter.Controls.Add(panelFilterInner);

            // ----- CENTER: DANH SÁCH PHÒNG + CHI TIẾT -----
            var panelCenter = new Panel
            {
                Dock = DockStyle.Fill,
                BackColor = Color.FromArgb(245, 245, 245)
            };

            // FlowLayoutPanel chứa các "khung tầng"
            flowRooms = new FlowLayoutPanel
            {
                Dock = DockStyle.Fill,
                AutoScroll = true,
                Padding = new Padding(10),
                BackColor = Color.FromArgb(245, 245, 245),

                // mỗi tầng 1 dòng, full width, xếp từ trên xuống dưới
                WrapContents = false,
                FlowDirection = FlowDirection.TopDown
            };
            // khi thêm khối tầng mới thì tự chỉnh lại width
            flowRooms.ControlAdded += new ControlEventHandler(this.flowRooms_ControlAdded);

            // Panel chi tiết phòng (bên phải, nếu bạn dùng side panel)
            panelDetailHost = new Panel
            {
                Dock = DockStyle.Right,
                Width = 350,
                Visible = false,
                BackColor = Color.White
            };

            panelCenter.Controls.Add(flowRooms);
            panelCenter.Controls.Add(panelDetailHost);

            panelMain.Controls.Add(panelCenter);
            panelMain.Controls.Add(panelFilter);

            // ===== ADD VÀO FORM =====
            this.Controls.Add(panelMain);
            this.Controls.Add(panelLeft);
            this.Controls.Add(panelTop);

            // ===== Helpers =====
            Button MakeLeftButton(string text, int top)
            {
                var btn = new Button
                {
                    FlatStyle = FlatStyle.Flat,
                    TextAlign = ContentAlignment.MiddleLeft,
                    Font = new Font("Segoe UI", 10F),
                    ForeColor = Color.FromArgb(55, 71, 79),
                    BackColor = Color.Transparent,
                    Text = text,
                    Width = 220,
                    Height = 36,
                    Location = new Point(0, top),
                    Padding = new Padding(20, 0, 0, 0),
                    Anchor = AnchorStyles.Top | AnchorStyles.Left | AnchorStyles.Right
                };
                btn.FlatAppearance.BorderSize = 0;
                return btn;
            }

            Button MakeFilter(string text, Color color)
            {
                var btn = new Button
                {
                    FlatStyle = FlatStyle.Flat,
                    Font = new Font("Segoe UI", 9F, FontStyle.Bold),
                    ForeColor = Color.White,
                    BackColor = color,
                    Text = text,
                    Height = 30,
                    Width = 130,
                    Margin = new Padding(5, 5, 5, 5)
                };
                btn.FlatAppearance.BorderSize = 0;
                return btn;
            }
        }
    }
}


================================================================================================
FILE PATH: Forms\RoomDetailForm.cs
================================================================================================
using System;
using System.Collections.Generic;
using System.Drawing;
using System.Globalization;
using System.Text.RegularExpressions;
using System.Windows.Forms;
using HotelManagement.Data;
using HotelManagement.Models;

namespace HotelManagement.Forms
{
    public partial class RoomDetailForm : Form
    {
        private readonly Room _room;
        private readonly RoomDAL _roomDal = new RoomDAL();
        private readonly BookingDAL _bookingDal = new BookingDAL();

        public event EventHandler BackRequested;
        public event EventHandler Saved;

        private bool _layoutApplied = false;

        public RoomDetailForm(Room room)
        {
            if (room == null) throw new ArgumentNullException(nameof(room));
            _room = room;

            InitializeComponent();
            ApplyResponsiveLayout();
        }

        private void RoomDetailForm_Load(object sender, EventArgs e)
        {
            lblTitle.Text = "Nhận phòng nhanh";
            lblRoomText.Text = $"{_room.MaPhong} • {( _room.LoaiPhongID == 1 ? "Phòng Đơn" : _room.LoaiPhongID == 2 ? "Phòng Đôi" : "Phòng")}, Tầng {_room.Tang}";

            InitCombos();
            BindRoomInfo();

            dtpNhanPhong.Value = _room.ThoiGianBatDau ?? DateTime.Now;

            LoadStateFromGhiChu(_room.GhiChu);

            if (!string.IsNullOrWhiteSpace(_room.TenKhachHienThi) && string.IsNullOrWhiteSpace(txtHoTen.Text))
                txtHoTen.Text = _room.TenKhachHienThi;
        }

        private void ApplyResponsiveLayout()
        {
            if (_layoutApplied) return;
            _layoutApplied = true;

            SuspendLayout();
            AutoScroll = false;
            BackColor = Color.White;

            // ===== ROOT =====
            var root = new TableLayoutPanel
            {
                Dock = DockStyle.Fill,
                ColumnCount = 1,
                RowCount = 3,
                Padding = new Padding(12),
                BackColor = Color.White
            };
            root.ColumnStyles.Add(new ColumnStyle(SizeType.Percent, 100f));
            root.RowStyles.Add(new RowStyle(SizeType.AutoSize));
            root.RowStyles.Add(new RowStyle(SizeType.Percent, 100f));
            root.RowStyles.Add(new RowStyle(SizeType.AutoSize));

            // ===== HEADER =====
            var header = new TableLayoutPanel
            {
                Dock = DockStyle.Top,
                ColumnCount = 2,
                AutoSize = true,
                BackColor = Color.White
            };
            header.ColumnStyles.Add(new ColumnStyle(SizeType.Percent, 100f));
            header.ColumnStyles.Add(new ColumnStyle(SizeType.AutoSize));

            var headerText = new FlowLayoutPanel
            {
                Dock = DockStyle.Fill,
                FlowDirection = FlowDirection.TopDown,
                WrapContents = false,
                AutoSize = true,
                Margin = new Padding(0),
                BackColor = Color.White
            };

            lblTitle.AutoSize = true;
            lblRoomText.AutoSize = true;

            headerText.Controls.Add(lblTitle);
            headerText.Controls.Add(lblRoomText);

            btnCloseTop.Text = "x";
            btnCloseTop.AutoSize = true;
            btnCloseTop.FlatStyle = FlatStyle.Flat;
            btnCloseTop.FlatAppearance.BorderSize = 0;
            btnCloseTop.ForeColor = Color.Gray;
            btnCloseTop.BackColor = Color.Transparent;
            btnCloseTop.Margin = new Padding(8, 0, 0, 0);
            btnCloseTop.Click -= btnDong_Click;
            btnCloseTop.Click += new EventHandler(this.btnDong_Click);

            header.Controls.Add(headerText, 0, 0);
            header.Controls.Add(btnCloseTop, 1, 0);

            // ===== CONTENT (SCROLL) =====
            var contentHost = new Panel
            {
                Dock = DockStyle.Fill,
                AutoScroll = true,
                BackColor = Color.White,
                Margin = new Padding(0, 8, 0, 0)
            };

            var content = new TableLayoutPanel
            {
                Dock = DockStyle.Top,
                ColumnCount = 1,
                AutoSize = true,
                BackColor = Color.White
            };
            content.ColumnStyles.Add(new ColumnStyle(SizeType.Percent, 100f));

            // Group: Lưu trú
            grpLuuTru.Dock = DockStyle.Top;
            grpLuuTru.AutoSize = true;
            grpLuuTru.Padding = new Padding(10);
            grpLuuTru.Margin = new Padding(0, 0, 0, 10);

            BuildLuuTruLayout();

            // Group: Khách
            grpKhach.Dock = DockStyle.Top;
            grpKhach.AutoSize = true;
            grpKhach.Padding = new Padding(10);
            grpKhach.Margin = new Padding(0);

            BuildKhachLayout();

            content.Controls.Add(grpLuuTru, 0, 0);
            content.Controls.Add(grpKhach, 0, 1);
            contentHost.Controls.Add(content);

            // ===== FOOTER =====
            var footer = new FlowLayoutPanel
            {
                Dock = DockStyle.Fill,
                FlowDirection = FlowDirection.RightToLeft,
                WrapContents = false,
                AutoSize = true,
                Margin = new Padding(0, 10, 0, 0),
                BackColor = Color.White
            };

            btnNhanPhong.AutoSize = true;
            btnDong.AutoSize = true;
            footer.Controls.Add(btnNhanPhong);
            footer.Controls.Add(btnDong);

            // ===== ASSEMBLE =====
            root.Controls.Add(header, 0, 0);
            root.Controls.Add(contentHost, 0, 1);
            root.Controls.Add(footer, 0, 2);

            Controls.Clear();
            Controls.Add(root);
            AcceptButton = btnNhanPhong;

            ResumeLayout(true);
        }

        private void BuildLuuTruLayout()
        {
            NormalizeInput(dtpNhanPhong);
            NormalizeInput(dtpTraPhong);
            NormalizeInput(cboLyDoLuuTru);
            NormalizeInput(cboLoaiPhong);
            NormalizeInput(cboPhong);
            NormalizeInput(txtGiaPhong);

            dtpNhanPhong.ShowUpDown = true;

            txtGiaPhong.ReadOnly = true;
            txtGiaPhong.TextAlign = HorizontalAlignment.Right;

            lblGiaPhongDonVi.AutoSize = true;
            lblGiaPhongDonVi.ForeColor = Color.Gray;
            lblGiaPhongDonVi.Text = "đ";

            var tbl = NewFormTable();

            AddRow(tbl, lblNhanPhong, dtpNhanPhong);
            AddRow(tbl, lblTraPhong, dtpTraPhong);
            AddRow(tbl, lblLyDo, cboLyDoLuuTru);
            AddRow(tbl, lblLoaiPhong, cboLoaiPhong);
            AddRow(tbl, lblPhong, cboPhong);

            var pricePanel = new Panel { Dock = DockStyle.Top, Height = 28, Margin = new Padding(0, 2, 0, 8) };
            txtGiaPhong.Dock = DockStyle.Fill;
            lblGiaPhongDonVi.Dock = DockStyle.Right;
            lblGiaPhongDonVi.Padding = new Padding(6, 5, 0, 0);
            pricePanel.Controls.Add(txtGiaPhong);
            pricePanel.Controls.Add(lblGiaPhongDonVi);

            AddRow(tbl, lblGiaPhong, pricePanel);

            grpLuuTru.Controls.Clear();
            grpLuuTru.Controls.Add(tbl);
        }

        private void BuildKhachLayout()
        {
            NormalizeInput(txtHoTen);
            NormalizeInput(cboGioiTinh);
            NormalizeInput(dtpNgaySinh);
            NormalizeInput(cboLoaiGiayTo);
            NormalizeInput(txtSoGiayTo);
            NormalizeInput(cboQuocTich);
            NormalizeInput(cboTinhThanh);
            NormalizeInput(cboPhuongXa);
            NormalizeInput(txtDiaChiChiTiet);

            // Buttons bar
            var bar = new FlowLayoutPanel
            {
                Dock = DockStyle.Top,
                FlowDirection = FlowDirection.RightToLeft,
                WrapContents = false,
                AutoSize = true,
                Margin = new Padding(0, 0, 0, 8),
                BackColor = Color.Transparent
            };
            btnThemKhach.AutoSize = true;
            btnLamMoi.AutoSize = true;
            btnQuetMa.AutoSize = true;
            bar.Controls.Add(btnQuetMa);
            bar.Controls.Add(btnLamMoi);
            bar.Controls.Add(btnThemKhach);

            // Fields table (1 cột label + 1 cột input)
            var fields = NewFormTable();

            AddRow(fields, lblHoTen, txtHoTen);
            AddRow(fields, lblGioiTinh, cboGioiTinh);
            AddRow(fields, lblNgaySinh, dtpNgaySinh);
            AddRow(fields, lblLoaiGiayTo, cboLoaiGiayTo);
            AddRow(fields, lblSoGiayTo, txtSoGiayTo);
            AddRow(fields, lblQuocTich, cboQuocTich);

            var pnlNoiCuTru = new FlowLayoutPanel
            {
                Dock = DockStyle.Top,
                AutoSize = true,
                FlowDirection = FlowDirection.LeftToRight,
                WrapContents = true,
                Margin = new Padding(0, 2, 0, 8)
            };
            rdoThuongTru.AutoSize = true;
            rdoTamTru.AutoSize = true;
            rdoNoiKhac.AutoSize = true;
            pnlNoiCuTru.Controls.Add(rdoThuongTru);
            pnlNoiCuTru.Controls.Add(rdoTamTru);
            pnlNoiCuTru.Controls.Add(rdoNoiKhac);
            AddRow(fields, lblNoiCuTru, pnlNoiCuTru);

            var pnlDiaBan = new FlowLayoutPanel
            {
                Dock = DockStyle.Top,
                AutoSize = true,
                FlowDirection = FlowDirection.LeftToRight,
                WrapContents = true,
                Margin = new Padding(0, 2, 0, 8)
            };
            rdoDiaBanMoi.AutoSize = true;
            rdoDiaBanCu.AutoSize = true;
            pnlDiaBan.Controls.Add(rdoDiaBanMoi);
            pnlDiaBan.Controls.Add(rdoDiaBanCu);
            AddRow(fields, lblLoaiDiaBan, pnlDiaBan);

            AddRow(fields, lblTinhThanh, cboTinhThanh);
            AddRow(fields, lblPhuongXa, cboPhuongXa);
            AddRow(fields, lblDiaChiChiTiet, txtDiaChiChiTiet);

            grpDanhSachKhach.Text = "Danh sách khách";
            grpDanhSachKhach.Font = new Font("Segoe UI", 9F, FontStyle.Bold);
            grpDanhSachKhach.Dock = DockStyle.Top;
            grpDanhSachKhach.Height = 170;
            grpDanhSachKhach.Padding = new Padding(8);
            lstKhach.Dock = DockStyle.Fill;

            grpDanhSachKhach.Controls.Clear();
            grpDanhSachKhach.Controls.Add(lstKhach);

            var wrapper = new Panel { Dock = DockStyle.Top, AutoSize = true };
            wrapper.Controls.Add(grpDanhSachKhach);
            wrapper.Controls.Add(fields);
            wrapper.Controls.Add(bar);

            grpKhach.Controls.Clear();
            grpKhach.Controls.Add(wrapper);
        }

        private static TableLayoutPanel NewFormTable()
        {
            var tbl = new TableLayoutPanel
            {
                Dock = DockStyle.Top,
                AutoSize = true,
                ColumnCount = 2,
                BackColor = Color.Transparent
            };
            tbl.ColumnStyles.Add(new ColumnStyle(SizeType.AutoSize));
            tbl.ColumnStyles.Add(new ColumnStyle(SizeType.Percent, 100f));
            return tbl;
        }

        private static void AddRow(TableLayoutPanel tbl, Control label, Control input)
        {
            if (tbl == null || label == null || input == null) return;

            int row = tbl.RowCount;
            tbl.RowCount += 1;
            tbl.RowStyles.Add(new RowStyle(SizeType.AutoSize));

            label.AutoSize = true;
            label.Margin = new Padding(0, 6, 10, 0);
            label.Anchor = AnchorStyles.Left | AnchorStyles.Top;

            input.Anchor = AnchorStyles.Left | AnchorStyles.Right | AnchorStyles.Top;

            tbl.Controls.Add(label, 0, row);
            tbl.Controls.Add(input, 1, row);
        }

        private static void NormalizeInput(Control c)
        {
            if (c == null) return;

            c.Margin = new Padding(0, 2, 0, 8);
            c.Anchor = AnchorStyles.Left | AnchorStyles.Right | AnchorStyles.Top;

            if (c is TextBox tb)
            {
                tb.BorderStyle = BorderStyle.FixedSingle;
                tb.Height = 28;
            }
            else if (c is ComboBox cb)
            {
                cb.IntegralHeight = false;
                cb.DropDownHeight = 200;
                cb.Height = 28;
            }
            else if (c is DateTimePicker dp)
            {
                dp.Height = 28;
            }
        }

        private void InitCombos()
        {
            cboLyDoLuuTru.Items.Clear();
            cboLyDoLuuTru.Items.AddRange(new object[] { "-- Chọn --", "Du lịch", "Công tác", "Thăm thân", "Khác" });
            cboLyDoLuuTru.SelectedIndex = 0;

            cboGioiTinh.Items.Clear();
            cboGioiTinh.Items.AddRange(new object[] { "-- Chọn --", "Nam", "Nữ", "Khác" });
            cboGioiTinh.SelectedIndex = 0;

            cboLoaiGiayTo.Items.Clear();
            cboLoaiGiayTo.Items.AddRange(new object[] { "Thẻ CCCD", "CMND", "Hộ chiếu" });
            cboLoaiGiayTo.SelectedIndex = 0;

            cboQuocTich.Items.Clear();
            cboQuocTich.Items.AddRange(new object[]
            {
                "VNM - Việt Nam","USA - United States","KOR - Korea","JPN - Japan","CHN - China",
                "FRA - France","DEU - Germany","GBR - United Kingdom","AUS - Australia","CAN - Canada","OTHER"
            });
            cboQuocTich.SelectedIndex = 0;

            cboTinhThanh.Items.Clear();
            cboTinhThanh.Items.AddRange(new object[]
            {
                "-- Chọn Tỉnh/Thành --","Hà Nội","TP. Hồ Chí Minh","Đà Nẵng","Hải Phòng","Cần Thơ","Khác"
            });
            cboTinhThanh.SelectedIndex = 0;

            cboPhuongXa.Items.Clear();
            cboPhuongXa.Items.AddRange(new object[]
            {
                "-- Chọn Phường/Xã --","Phường 1","Phường 2","Phường 3","Xã 1","Xã 2","Khác"
            });
            cboPhuongXa.SelectedIndex = 0;

            rdoThuongTru.Checked = true;
            rdoDiaBanMoi.Checked = true;

            if (dtpNgaySinh.Value.Year < 1900) dtpNgaySinh.Value = new DateTime(1990, 1, 1);
        }

        private void BindRoomInfo()
        {
            cboLoaiPhong.Items.Clear();
            cboLoaiPhong.Items.Add(_room.LoaiPhongID == 1 ? "Phòng Đơn" : _room.LoaiPhongID == 2 ? "Phòng Đôi" : "Phòng");
            cboLoaiPhong.SelectedIndex = 0;
            cboLoaiPhong.Enabled = false;

            cboPhong.Items.Clear();
            cboPhong.Items.Add("Phòng " + _room.MaPhong);
            cboPhong.SelectedIndex = 0;
            cboPhong.Enabled = false;

            try
            {
                decimal gia = _bookingDal.GetDonGiaNgayByPhong(_room.PhongID);
                if (gia <= 0)
                    gia = (_room.LoaiPhongID == 1) ? 250000m : 350000m;

                txtGiaPhong.Text = gia.ToString("N0");
            }
            catch
            {
                txtGiaPhong.Text = "0";
            }
        }

        private void btnDong_Click(object sender, EventArgs e)
        {
            BackRequested?.Invoke(this, EventArgs.Empty);
        }

        private void btnNhanPhong_Click(object sender, EventArgs e)
        {
            if (!ValidateForm()) return;

            string tenChinh = GetPrimaryGuestName();

            _room.TrangThai = 1;
            _room.KieuThue = (_room.KieuThue.HasValue && _room.KieuThue.Value > 0) ? _room.KieuThue : 1;
            _room.ThoiGianBatDau = dtpNhanPhong.Value;
            _room.TenKhachHienThi = tenChinh;

            string ghiChu = BuildGhiChuForSave();

            _roomDal.UpdateTrangThaiFull(
                _room.PhongID,
                _room.TrangThai,
                ghiChu,
                _room.ThoiGianBatDau,
                _room.KieuThue,
                _room.TenKhachHienThi
            );

            _room.GhiChu = ghiChu;

            Saved?.Invoke(this, EventArgs.Empty);
            BackRequested?.Invoke(this, EventArgs.Empty);
        }

        private bool ValidateForm()
        {
            if (cboLyDoLuuTru.SelectedIndex <= 0)
            {
                MessageBox.Show("Vui lòng chọn Lý do lưu trú.", "Thiếu thông tin", MessageBoxButtons.OK, MessageBoxIcon.Warning);
                cboLyDoLuuTru.Focus();
                return false;
            }

            if (string.IsNullOrWhiteSpace(GetPrimaryGuestName()))
            {
                MessageBox.Show("Vui lòng nhập Họ tên.", "Thiếu thông tin", MessageBoxButtons.OK, MessageBoxIcon.Warning);
                txtHoTen.Focus();
                return false;
            }

            if (cboGioiTinh.SelectedIndex <= 0)
            {
                MessageBox.Show("Vui lòng chọn Giới tính.", "Thiếu thông tin", MessageBoxButtons.OK, MessageBoxIcon.Warning);
                cboGioiTinh.Focus();
                return false;
            }

            if (string.IsNullOrWhiteSpace(txtSoGiayTo.Text))
            {
                MessageBox.Show("Vui lòng nhập Số giấy tờ.", "Thiếu thông tin", MessageBoxButtons.OK, MessageBoxIcon.Warning);
                txtSoGiayTo.Focus();
                return false;
            }

            if (cboTinhThanh.SelectedIndex <= 0 || cboPhuongXa.SelectedIndex <= 0 || string.IsNullOrWhiteSpace(txtDiaChiChiTiet.Text))
            {
                MessageBox.Show("Vui lòng nhập đầy đủ địa chỉ (Tỉnh/Thành, Phường/Xã, Địa chỉ chi tiết).", "Thiếu thông tin", MessageBoxButtons.OK, MessageBoxIcon.Warning);
                return false;
            }

            return true;
        }

        private string GetPrimaryGuestName()
        {
            if (lstKhach.Items.Count > 0)
            {
                string item = lstKhach.Items[0]?.ToString() ?? "";
                if (!string.IsNullOrWhiteSpace(item))
                {
                    int idx = item.IndexOf(" - ", StringComparison.Ordinal);
                    return idx > 0 ? item.Substring(0, idx).Trim() : item.Trim();
                }
            }
            return (txtHoTen.Text ?? "").Trim();
        }

        private void btnThemKhach_Click(object sender, EventArgs e)
        {
            if (string.IsNullOrWhiteSpace(txtHoTen.Text))
            {
                MessageBox.Show("Vui lòng nhập Họ tên.", "Thiếu thông tin", MessageBoxButtons.OK, MessageBoxIcon.Warning);
                txtHoTen.Focus();
                return;
            }

            if (string.IsNullOrWhiteSpace(txtSoGiayTo.Text))
            {
                MessageBox.Show("Vui lòng nhập Số giấy tờ.", "Thiếu thông tin", MessageBoxButtons.OK, MessageBoxIcon.Warning);
                txtSoGiayTo.Focus();
                return;
            }

            string display = $"{txtHoTen.Text.Trim()} - {txtSoGiayTo.Text.Trim()}";
            lstKhach.Items.Add(display);
            txtHoTen.SelectAll();
            txtHoTen.Focus();
        }

        private void btnLamMoi_Click(object sender, EventArgs e)
        {
            txtHoTen.Text = "";
            cboGioiTinh.SelectedIndex = 0;
            dtpNgaySinh.Value = new DateTime(1990, 1, 1);
            cboLoaiGiayTo.SelectedIndex = 0;
            txtSoGiayTo.Text = "";
            cboQuocTich.SelectedIndex = 0;

            rdoThuongTru.Checked = true;
            rdoDiaBanMoi.Checked = true;

            cboTinhThanh.SelectedIndex = 0;
            cboPhuongXa.SelectedIndex = 0;
            txtDiaChiChiTiet.Text = "";

            lstKhach.Items.Clear();
        }

        private void btnQuetMa_Click(object sender, EventArgs e)
        {
            MessageBox.Show("Chức năng quét mã sẽ được bổ sung sau.", "Thông báo", MessageBoxButtons.OK, MessageBoxIcon.Information);
        }

        private string BuildGhiChuForSave()
        {
            var tags = new List<string>();

            tags.Add("LYDO=" + SafeTagValue(cboLyDoLuuTru.SelectedItem?.ToString()));
            tags.Add("GT=" + SafeTagValue(cboGioiTinh.SelectedItem?.ToString()));
            tags.Add("NS=" + dtpNgaySinh.Value.ToString("yyyyMMdd"));
            tags.Add("LGT=" + SafeTagValue(cboLoaiGiayTo.SelectedItem?.ToString()));
            tags.Add("SGT=" + SafeTagValue(txtSoGiayTo.Text.Trim()));
            tags.Add("QT=" + SafeTagValue(cboQuocTich.SelectedItem?.ToString()));
            tags.Add("NCT=" + SafeTagValue(GetNoiCuTru()));
            tags.Add("LDB=" + SafeTagValue(GetLoaiDiaBan()));
            tags.Add("TINH=" + SafeTagValue(cboTinhThanh.SelectedItem?.ToString()));
            tags.Add("PX=" + SafeTagValue(cboPhuongXa.SelectedItem?.ToString()));
            tags.Add("DC=" + SafeTagValue(txtDiaChiChiTiet.Text.Trim()));

            if (dtpTraPhong.Checked)
                tags.Add("TRAP=" + dtpTraPhong.Value.ToString("yyyyMMdd"));

            if (lstKhach.Items.Count > 0)
            {
                var guests = new List<string>();
                foreach (var it in lstKhach.Items)
                {
                    if (it == null) continue;
                    string s = it.ToString().Trim();
                    if (s.Length > 0) guests.Add(SafeTagValue(s));
                }
                if (guests.Count > 0)
                    tags.Add("DSK=" + string.Join(";", guests));
            }

            return string.Join(" | ", tags);
        }

        private string GetNoiCuTru()
        {
            if (rdoTamTru.Checked) return "Tạm trú";
            if (rdoNoiKhac.Checked) return "Khác";
            return "Thường trú";
        }

        private string GetLoaiDiaBan()
        {
            return rdoDiaBanCu.Checked ? "Địa bàn cũ" : "Địa bàn mới";
        }

        private static string SafeTagValue(string s)
        {
            s = (s ?? "").Trim();
            if (s.Length == 0) return "";
            s = s.Replace("|", "/");
            s = Regex.Replace(s, @"\s+", " ");
            return s;
        }

        private static string GetStringTag(string text, string key, string defaultVal)
        {
            if (string.IsNullOrEmpty(text)) return defaultVal;
            Match m = Regex.Match(text, @"\b" + Regex.Escape(key) + @"\s*=\s*([^|]+)", RegexOptions.IgnoreCase);
            if (m.Success) return m.Groups[1].Value.Trim();
            return defaultVal;
        }

        private void LoadStateFromGhiChu(string ghiChu)
        {
            if (string.IsNullOrWhiteSpace(ghiChu)) return;

            string lydo = GetStringTag(ghiChu, "LYDO", "");
            SelectComboByText(cboLyDoLuuTru, lydo);

            string gt = GetStringTag(ghiChu, "GT", "");
            SelectComboByText(cboGioiTinh, gt);

            string ns = GetStringTag(ghiChu, "NS", "");
            if (ns.Length == 8 && DateTime.TryParseExact(ns, "yyyyMMdd", CultureInfo.InvariantCulture, DateTimeStyles.None, out var dob))
                dtpNgaySinh.Value = dob;

            string lgt = GetStringTag(ghiChu, "LGT", "");
            SelectComboByText(cboLoaiGiayTo, lgt);

            txtSoGiayTo.Text = GetStringTag(ghiChu, "SGT", "");

            string qt = GetStringTag(ghiChu, "QT", "");
            SelectComboByText(cboQuocTich, qt);

            string nct = GetStringTag(ghiChu, "NCT", "");
            string nctLower = (nct ?? "").ToLowerInvariant();
            if (nctLower.Contains("tạm") || nctLower.Contains("táº¡m") || nctLower.Contains("tam"))
                rdoTamTru.Checked = true;
            else if (nctLower.Contains("khác") || nctLower.Contains("khÃ¡c") || nctLower.Contains("khac"))
                rdoNoiKhac.Checked = true;
            else
                rdoThuongTru.Checked = true;

            string ldb = GetStringTag(ghiChu, "LDB", "");
            string ldbLower = (ldb ?? "").ToLowerInvariant();
            if (ldbLower.Contains("cũ") || ldbLower.Contains("cÅ©") || ldbLower.Contains("cu"))
                rdoDiaBanCu.Checked = true;
            else
                rdoDiaBanMoi.Checked = true;

            string tinh = GetStringTag(ghiChu, "TINH", "");
            SelectComboByText(cboTinhThanh, tinh);

            string px = GetStringTag(ghiChu, "PX", "");
            SelectComboByText(cboPhuongXa, px);

            txtDiaChiChiTiet.Text = GetStringTag(ghiChu, "DC", "");

            string trap = GetStringTag(ghiChu, "TRAP", "");
            if (trap.Length == 8 && DateTime.TryParseExact(trap, "yyyyMMdd", CultureInfo.InvariantCulture, DateTimeStyles.None, out var outDate))
            {
                dtpTraPhong.Value = outDate;
                dtpTraPhong.Checked = true;
            }

            string dsk = GetStringTag(ghiChu, "DSK", "");
            if (!string.IsNullOrWhiteSpace(dsk))
            {
                var parts = dsk.Split(new[] { ';' }, StringSplitOptions.RemoveEmptyEntries);
                foreach (var p in parts)
                    lstKhach.Items.Add(p.Trim());
            }
        }

        private static void SelectComboByText(ComboBox cbo, string text)
        {
            if (cbo == null || cbo.Items.Count == 0) return;
            if (string.IsNullOrWhiteSpace(text)) return;

            for (int i = 0; i < cbo.Items.Count; i++)
            {
                string it = cbo.Items[i]?.ToString() ?? "";

                if (string.Equals(it, text, StringComparison.OrdinalIgnoreCase))
                {
                    cbo.SelectedIndex = i;
                    return;
                }

                if (it.StartsWith(text, StringComparison.OrdinalIgnoreCase))
                {
                    cbo.SelectedIndex = i;
                    return;
                }
            }
        }
    }
}


================================================================================================
FILE PATH: Forms\RoomDetailForm.Designer.cs
================================================================================================
using System;
using System.Drawing;
using System.Windows.Forms;

namespace HotelManagement.Forms
{
    partial class RoomDetailForm
    {
        private System.ComponentModel.IContainer components = null;

        private Label lblTitle;
        private Label lblRoomText;
        private Button btnCloseTop;

        private GroupBox grpLuuTru;
        private Label lblNhanPhong;
        private DateTimePicker dtpNhanPhong;
        private Label lblTraPhong;
        private DateTimePicker dtpTraPhong;
        private Label lblLyDo;
        private ComboBox cboLyDoLuuTru;
        private Label lblLoaiPhong;
        private ComboBox cboLoaiPhong;
        private Label lblPhong;
        private ComboBox cboPhong;
        private Label lblGiaPhong;
        private TextBox txtGiaPhong;
        private Label lblGiaPhongDonVi;

        private GroupBox grpKhach;
        private Button btnThemKhach;
        private Button btnLamMoi;
        private Button btnQuetMa;

        private Label lblHoTen;
        private TextBox txtHoTen;
        private Label lblGioiTinh;
        private ComboBox cboGioiTinh;
        private Label lblNgaySinh;
        private DateTimePicker dtpNgaySinh;

        private Label lblLoaiGiayTo;
        private ComboBox cboLoaiGiayTo;
        private Label lblSoGiayTo;
        private TextBox txtSoGiayTo;

        private Label lblQuocTich;
        private ComboBox cboQuocTich;

        private Label lblNoiCuTru;
        private RadioButton rdoThuongTru;
        private RadioButton rdoTamTru;
        private RadioButton rdoNoiKhac;

        private Label lblLoaiDiaBan;
        private RadioButton rdoDiaBanMoi;
        private RadioButton rdoDiaBanCu;

        private Label lblTinhThanh;
        private ComboBox cboTinhThanh;
        private Label lblPhuongXa;
        private ComboBox cboPhuongXa;
        private Label lblDiaChiChiTiet;
        private TextBox txtDiaChiChiTiet;

        private GroupBox grpDanhSachKhach;
        private ListBox lstKhach;

        private Button btnDong;
        private Button btnNhanPhong;

        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null)) components.Dispose();
            base.Dispose(disposing);
        }

        private void InitializeComponent()
        {
            this.components = new System.ComponentModel.Container();

            this.lblTitle = new Label();
            this.lblRoomText = new Label();
            this.btnCloseTop = new Button();

            this.grpLuuTru = new GroupBox();
            this.lblNhanPhong = new Label();
            this.dtpNhanPhong = new DateTimePicker();
            this.lblTraPhong = new Label();
            this.dtpTraPhong = new DateTimePicker();
            this.lblLyDo = new Label();
            this.cboLyDoLuuTru = new ComboBox();
            this.lblLoaiPhong = new Label();
            this.cboLoaiPhong = new ComboBox();
            this.lblPhong = new Label();
            this.cboPhong = new ComboBox();
            this.lblGiaPhong = new Label();
            this.txtGiaPhong = new TextBox();
            this.lblGiaPhongDonVi = new Label();

            this.grpKhach = new GroupBox();
            this.btnThemKhach = new Button();
            this.btnLamMoi = new Button();
            this.btnQuetMa = new Button();

            this.lblHoTen = new Label();
            this.txtHoTen = new TextBox();
            this.lblGioiTinh = new Label();
            this.cboGioiTinh = new ComboBox();
            this.lblNgaySinh = new Label();
            this.dtpNgaySinh = new DateTimePicker();

            this.lblLoaiGiayTo = new Label();
            this.cboLoaiGiayTo = new ComboBox();
            this.lblSoGiayTo = new Label();
            this.txtSoGiayTo = new TextBox();

            this.lblQuocTich = new Label();
            this.cboQuocTich = new ComboBox();

            this.lblNoiCuTru = new Label();
            this.rdoThuongTru = new RadioButton();
            this.rdoTamTru = new RadioButton();
            this.rdoNoiKhac = new RadioButton();

            this.lblLoaiDiaBan = new Label();
            this.rdoDiaBanMoi = new RadioButton();
            this.rdoDiaBanCu = new RadioButton();

            this.lblTinhThanh = new Label();
            this.cboTinhThanh = new ComboBox();
            this.lblPhuongXa = new Label();
            this.cboPhuongXa = new ComboBox();
            this.lblDiaChiChiTiet = new Label();
            this.txtDiaChiChiTiet = new TextBox();

            this.grpDanhSachKhach = new GroupBox();
            this.lstKhach = new ListBox();

            this.btnDong = new Button();
            this.btnNhanPhong = new Button();

            this.AutoScaleMode = AutoScaleMode.Font;
            this.BackColor = Color.White;
            this.ClientSize = new Size(1100, 680);
            this.FormBorderStyle = FormBorderStyle.None;
            this.DoubleBuffered = true;
            this.Load += new EventHandler(this.RoomDetailForm_Load);

            this.lblTitle.AutoSize = true;
            this.lblTitle.Font = new Font("Segoe UI Semibold", 14F, FontStyle.Bold);
            this.lblTitle.ForeColor = Color.FromArgb(33, 33, 33);
            this.lblTitle.Text = "Nhận phòng nhanh";

            this.lblRoomText.AutoSize = true;
            this.lblRoomText.Font = new Font("Segoe UI", 10F);
            this.lblRoomText.ForeColor = Color.Gray;
            this.lblRoomText.Text = "Phòng";

            this.btnCloseTop.Text = "x";
            this.btnCloseTop.Font = new Font("Segoe UI", 9F, FontStyle.Bold);
            this.btnCloseTop.BackColor = Color.Transparent;
            this.btnCloseTop.FlatStyle = FlatStyle.Flat;
            this.btnCloseTop.FlatAppearance.BorderSize = 0;
            this.btnCloseTop.ForeColor = Color.Gray;
            this.btnCloseTop.Click += new EventHandler(this.btnDong_Click);

            this.grpLuuTru.Text = "Thông tin lưu trú";
            this.grpLuuTru.Font = new Font("Segoe UI", 9F, FontStyle.Bold);

            this.lblNhanPhong.AutoSize = true;
            this.lblNhanPhong.Font = new Font("Segoe UI", 9F);
            this.lblNhanPhong.Text = "Thời gian nhận phòng *";

            this.dtpNhanPhong.Font = new Font("Segoe UI", 9F);
            this.dtpNhanPhong.Format = DateTimePickerFormat.Custom;
            this.dtpNhanPhong.CustomFormat = "dd/MM/yyyy HH:mm";
            this.dtpNhanPhong.ShowUpDown = true;

            this.lblTraPhong.AutoSize = true;
            this.lblTraPhong.Font = new Font("Segoe UI", 9F);
            this.lblTraPhong.Text = "Thời gian trả phòng";

            this.dtpTraPhong.Font = new Font("Segoe UI", 9F);
            this.dtpTraPhong.Format = DateTimePickerFormat.Custom;
            this.dtpTraPhong.CustomFormat = "dd/MM/yyyy";
            this.dtpTraPhong.ShowCheckBox = true;
            this.dtpTraPhong.Checked = false;

            this.lblLyDo.AutoSize = true;
            this.lblLyDo.Font = new Font("Segoe UI", 9F);
            this.lblLyDo.Text = "Lý do lưu trú *";

            this.cboLyDoLuuTru.Font = new Font("Segoe UI", 9F);
            this.cboLyDoLuuTru.DropDownStyle = ComboBoxStyle.DropDownList;

            this.lblLoaiPhong.AutoSize = true;
            this.lblLoaiPhong.Font = new Font("Segoe UI", 9F);
            this.lblLoaiPhong.Text = "Loại phòng *";

            this.cboLoaiPhong.Font = new Font("Segoe UI", 9F);
            this.cboLoaiPhong.DropDownStyle = ComboBoxStyle.DropDownList;

            this.lblPhong.AutoSize = true;
            this.lblPhong.Font = new Font("Segoe UI", 9F);
            this.lblPhong.Text = "Phòng *";

            this.cboPhong.Font = new Font("Segoe UI", 9F);
            this.cboPhong.DropDownStyle = ComboBoxStyle.DropDownList;

            this.lblGiaPhong.AutoSize = true;
            this.lblGiaPhong.Font = new Font("Segoe UI", 9F);
            this.lblGiaPhong.Text = "Giá phòng:";

            this.txtGiaPhong.Font = new Font("Segoe UI", 9F);
            this.txtGiaPhong.ReadOnly = true;

            this.lblGiaPhongDonVi.AutoSize = true;
            this.lblGiaPhongDonVi.Font = new Font("Segoe UI", 9F);
            this.lblGiaPhongDonVi.ForeColor = Color.Gray;
            this.lblGiaPhongDonVi.Text = "đ";

            this.grpKhach.Text = "Thông tin khách";
            this.grpKhach.Font = new Font("Segoe UI", 9F, FontStyle.Bold);

            this.btnThemKhach.Text = "Thêm khách";
            this.btnThemKhach.Font = new Font("Segoe UI", 9F, FontStyle.Bold);
            this.btnThemKhach.BackColor = Color.FromArgb(33, 150, 243);
            this.btnThemKhach.ForeColor = Color.White;
            this.btnThemKhach.FlatStyle = FlatStyle.Flat;
            this.btnThemKhach.FlatAppearance.BorderSize = 0;
            this.btnThemKhach.Click += new EventHandler(this.btnThemKhach_Click);

            this.btnLamMoi.Text = "Làm mới";
            this.btnLamMoi.Font = new Font("Segoe UI", 9F, FontStyle.Bold);
            this.btnLamMoi.BackColor = Color.White;
            this.btnLamMoi.ForeColor = Color.FromArgb(33, 150, 243);
            this.btnLamMoi.FlatStyle = FlatStyle.Flat;
            this.btnLamMoi.FlatAppearance.BorderSize = 1;
            this.btnLamMoi.FlatAppearance.BorderColor = Color.FromArgb(33, 150, 243);
            this.btnLamMoi.Click += new EventHandler(this.btnLamMoi_Click);

            this.btnQuetMa.Text = "Quét mã (F1)";
            this.btnQuetMa.Font = new Font("Segoe UI", 9F, FontStyle.Bold);
            this.btnQuetMa.BackColor = Color.FromArgb(33, 150, 243);
            this.btnQuetMa.ForeColor = Color.White;
            this.btnQuetMa.FlatStyle = FlatStyle.Flat;
            this.btnQuetMa.FlatAppearance.BorderSize = 0;
            this.btnQuetMa.Click += new EventHandler(this.btnQuetMa_Click);

            this.lblHoTen.AutoSize = true;
            this.lblHoTen.Font = new Font("Segoe UI", 9F);
            this.lblHoTen.Text = "Họ tên *";

            this.txtHoTen.Font = new Font("Segoe UI", 9F);

            this.lblGioiTinh.AutoSize = true;
            this.lblGioiTinh.Font = new Font("Segoe UI", 9F);
            this.lblGioiTinh.Text = "Giới tính *";

            this.cboGioiTinh.Font = new Font("Segoe UI", 9F);
            this.cboGioiTinh.DropDownStyle = ComboBoxStyle.DropDownList;

            this.lblNgaySinh.AutoSize = true;
            this.lblNgaySinh.Font = new Font("Segoe UI", 9F);
            this.lblNgaySinh.Text = "Ngày sinh *";

            this.dtpNgaySinh.Font = new Font("Segoe UI", 9F);
            this.dtpNgaySinh.Format = DateTimePickerFormat.Custom;
            this.dtpNgaySinh.CustomFormat = "dd/MM/yyyy";

            this.lblLoaiGiayTo.AutoSize = true;
            this.lblLoaiGiayTo.Font = new Font("Segoe UI", 9F);
            this.lblLoaiGiayTo.Text = "Loại giấy tờ *";

            this.cboLoaiGiayTo.Font = new Font("Segoe UI", 9F);
            this.cboLoaiGiayTo.DropDownStyle = ComboBoxStyle.DropDownList;

            this.lblSoGiayTo.AutoSize = true;
            this.lblSoGiayTo.Font = new Font("Segoe UI", 9F);
            this.lblSoGiayTo.Text = "Số giấy tờ *";

            this.txtSoGiayTo.Font = new Font("Segoe UI", 9F);

            this.lblQuocTich.AutoSize = true;
            this.lblQuocTich.Font = new Font("Segoe UI", 9F);
            this.lblQuocTich.Text = "Quốc tịch *";

            this.cboQuocTich.Font = new Font("Segoe UI", 9F);
            this.cboQuocTich.DropDownStyle = ComboBoxStyle.DropDownList;

            this.lblNoiCuTru.AutoSize = true;
            this.lblNoiCuTru.Font = new Font("Segoe UI", 9F);
            this.lblNoiCuTru.Text = "Nơi cư trú *";

            this.rdoThuongTru.Font = new Font("Segoe UI", 9F);
            this.rdoThuongTru.Text = "Thường trú";

            this.rdoTamTru.Font = new Font("Segoe UI", 9F);
            this.rdoTamTru.Text = "Tạm trú";

            this.rdoNoiKhac.Font = new Font("Segoe UI", 9F);
            this.rdoNoiKhac.Text = "Khác";

            this.lblLoaiDiaBan.AutoSize = true;
            this.lblLoaiDiaBan.Font = new Font("Segoe UI", 9F);
            this.lblLoaiDiaBan.Text = "Loại địa bàn:";

            this.rdoDiaBanMoi.Font = new Font("Segoe UI", 9F);
            this.rdoDiaBanMoi.Text = "Địa bàn mới";

            this.rdoDiaBanCu.Font = new Font("Segoe UI", 9F);
            this.rdoDiaBanCu.Text = "Địa bàn cũ";

            this.lblTinhThanh.AutoSize = true;
            this.lblTinhThanh.Font = new Font("Segoe UI", 9F);
            this.lblTinhThanh.Text = "Tỉnh/Thành phố *";

            this.cboTinhThanh.Font = new Font("Segoe UI", 9F);
            this.cboTinhThanh.DropDownStyle = ComboBoxStyle.DropDownList;

            this.lblPhuongXa.AutoSize = true;
            this.lblPhuongXa.Font = new Font("Segoe UI", 9F);
            this.lblPhuongXa.Text = "Phường/Xã/Đặc khu *";

            this.cboPhuongXa.Font = new Font("Segoe UI", 9F);
            this.cboPhuongXa.DropDownStyle = ComboBoxStyle.DropDownList;

            this.lblDiaChiChiTiet.AutoSize = true;
            this.lblDiaChiChiTiet.Font = new Font("Segoe UI", 9F);
            this.lblDiaChiChiTiet.Text = "Địa chỉ chi tiết *";

            this.txtDiaChiChiTiet.Font = new Font("Segoe UI", 9F);

            this.grpDanhSachKhach.Text = "Danh sách khách";
            this.grpDanhSachKhach.Font = new Font("Segoe UI", 9F, FontStyle.Bold);

            this.lstKhach.Font = new Font("Segoe UI", 9F);

            this.btnDong.Text = "Đóng";
            this.btnDong.Font = new Font("Segoe UI", 9F, FontStyle.Bold);
            this.btnDong.BackColor = Color.White;
            this.btnDong.ForeColor = Color.FromArgb(33, 150, 243);
            this.btnDong.FlatStyle = FlatStyle.Flat;
            this.btnDong.FlatAppearance.BorderSize = 1;
            this.btnDong.FlatAppearance.BorderColor = Color.FromArgb(33, 150, 243);
            this.btnDong.Click += new EventHandler(this.btnDong_Click);

            this.btnNhanPhong.Text = "Nhận phòng";
            this.btnNhanPhong.Font = new Font("Segoe UI", 9F, FontStyle.Bold);
            this.btnNhanPhong.BackColor = Color.FromArgb(33, 150, 243);
            this.btnNhanPhong.ForeColor = Color.White;
            this.btnNhanPhong.FlatStyle = FlatStyle.Flat;
            this.btnNhanPhong.FlatAppearance.BorderSize = 0;
            this.btnNhanPhong.Click += new EventHandler(this.btnNhanPhong_Click);
        }
    }
}


================================================================================================
FILE PATH: Hotel Management.csproj
================================================================================================
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="15.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" Condition="Exists('$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props')" />
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
    <ProjectGuid>{D57C892D-E5F8-426C-AB1D-E884C583FFAF}</ProjectGuid>
    <OutputType>WinExe</OutputType>
    <RootNamespace>Hotel_Management</RootNamespace>
    <AssemblyName>Hotel Management</AssemblyName>
    <TargetFrameworkVersion>v4.8</TargetFrameworkVersion>
    <FileAlignment>512</FileAlignment>
    <AutoGenerateBindingRedirects>true</AutoGenerateBindingRedirects>
    <Deterministic>true</Deterministic>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
    <PlatformTarget>AnyCPU</PlatformTarget>
    <DebugSymbols>true</DebugSymbols>
    <DebugType>full</DebugType>
    <Optimize>false</Optimize>
    <OutputPath>bin\Debug\</OutputPath>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
    <PlatformTarget>AnyCPU</PlatformTarget>
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>bin\Release\</OutputPath>
    <DefineConstants>TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <ItemGroup>
    <Reference Include="System" />
    <Reference Include="System.Core" />
    <Reference Include="System.Xml.Linq" />
    <Reference Include="System.Data.DataSetExtensions" />
    <Reference Include="Microsoft.CSharp" />
    <Reference Include="System.Data" />
    <Reference Include="System.Deployment" />
    <Reference Include="System.Drawing" />
    <Reference Include="System.Net.Http" />
    <Reference Include="System.Windows.Forms" />
    <Reference Include="System.Xml" />
  </ItemGroup>
  <ItemGroup>
    <Compile Include="Forms\RoomDetailForm.cs">
      <SubType>Form</SubType>
    </Compile>
    <Compile Include="Forms\RoomDetailForm.Designer.cs">
      <DependentUpon>RoomDetailForm.cs</DependentUpon>
    </Compile>
    <Compile Include="Forms\MainForm.cs">
      <SubType>Form</SubType>
    </Compile>
    <Compile Include="Forms\MainForm.Designer.cs">
      <DependentUpon>MainForm.cs</DependentUpon>
    </Compile>
    <Compile Include="Forms\LoginForm.cs">
      <SubType>Form</SubType>
    </Compile>
    <Compile Include="Forms\LoginForm.Designer.cs">
      <DependentUpon>LoginForm.cs</DependentUpon>
    </Compile>
    <Compile Include="Data\DbHelper.cs" />
    <Compile Include="Data\RoomDAL.cs" />
    <Compile Include="Data\BookingDAL.cs" />
    <Compile Include="Data\CustomerDAL.cs" />
    <Compile Include="Data\InvoiceDAL.cs" />
    <Compile Include="Data\UserDAL.cs" />
    <Compile Include="Models\ComboBoxItem.cs" />
    <Compile Include="Models\Booking.cs" />
    <Compile Include="Models\Invoice.cs" />
    <Compile Include="Models\User.cs" />
    <Compile Include="Models\Customer.cs" />
    <Compile Include="Models\Room.cs" />
    <Compile Include="Program.cs" />
    <Compile Include="Properties\AssemblyInfo.cs" />
    <EmbeddedResource Include="Properties\Resources.resx">
      <Generator>ResXFileCodeGenerator</Generator>
      <LastGenOutput>Resources.Designer.cs</LastGenOutput>
      <SubType>Designer</SubType>
    </EmbeddedResource>
    <Compile Include="Properties\Resources.Designer.cs">
      <AutoGen>True</AutoGen>
      <DependentUpon>Resources.resx</DependentUpon>
    </Compile>
    <None Include="Properties\Settings.settings">
      <Generator>SettingsSingleFileGenerator</Generator>
      <LastGenOutput>Settings.Designer.cs</LastGenOutput>
    </None>
    <Compile Include="Properties\Settings.Designer.cs">
      <AutoGen>True</AutoGen>
      <DependentUpon>Settings.settings</DependentUpon>
      <DesignTimeSharedInput>True</DesignTimeSharedInput>
    </Compile>
  </ItemGroup>
  <ItemGroup>
    <None Include="App.config" />
  </ItemGroup>
  <Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
</Project>

================================================================================================
FILE PATH: Hotel Management.sln
================================================================================================

Microsoft Visual Studio Solution File, Format Version 12.00
# Visual Studio Version 17
VisualStudioVersion = 17.14.36511.14 d17.14
MinimumVisualStudioVersion = 10.0.40219.1
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "Hotel Management", "Hotel Management.csproj", "{D57C892D-E5F8-426C-AB1D-E884C583FFAF}"
EndProject
Global
	GlobalSection(SolutionConfigurationPlatforms) = preSolution
		Debug|Any CPU = Debug|Any CPU
		Release|Any CPU = Release|Any CPU
	EndGlobalSection
	GlobalSection(ProjectConfigurationPlatforms) = postSolution
		{D57C892D-E5F8-426C-AB1D-E884C583FFAF}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
		{D57C892D-E5F8-426C-AB1D-E884C583FFAF}.Debug|Any CPU.Build.0 = Debug|Any CPU
		{D57C892D-E5F8-426C-AB1D-E884C583FFAF}.Release|Any CPU.ActiveCfg = Release|Any CPU
		{D57C892D-E5F8-426C-AB1D-E884C583FFAF}.Release|Any CPU.Build.0 = Release|Any CPU
	EndGlobalSection
	GlobalSection(SolutionProperties) = preSolution
		HideSolutionNode = FALSE
	EndGlobalSection
	GlobalSection(ExtensibilityGlobals) = postSolution
		SolutionGuid = {CEB21CEF-7D0D-4E28-9960-100E0E94307C}
	EndGlobalSection
EndGlobal


================================================================================================
FILE PATH: Models\Booking.cs
================================================================================================
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace HotelManagement.Models
{
    public class Booking
    {
        public int DatPhongID { get; set; }
        public int KhachHangID { get; set; }
        public int PhongID { get; set; }
        public DateTime NgayDen { get; set; }
        public DateTime NgayDiDuKien { get; set; }
        public DateTime? NgayDiThucTe { get; set; }
        public int TrangThai { get; set; }
        public decimal TienCoc { get; set; }
    }
}


================================================================================================
FILE PATH: Models\ComboBoxItem.cs
================================================================================================
namespace HotelManagement
{
    // Class nhỏ để hiển thị (Text) trong ComboBox nhưng lưu (Value)
    public class ComboBoxItem
    {
        public object Value { get; set; }
        public string Text { get; set; }

        public override string ToString()
        {
            return Text; // ComboBox hiển thị Text
        }
    }
}


================================================================================================
FILE PATH: Models\Customer.cs
================================================================================================
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace HotelManagement.Models
{
    public class Customer
    {
        public int KhachHangID { get; set; }
        public string HoTen { get; set; }
        public string CCCD { get; set; }
        public byte[] HinhCCCD { get; set; }
        public string DienThoai { get; set; }
        public string DiaChi { get; set; }
    }
}


================================================================================================
FILE PATH: Models\Invoice.cs
================================================================================================
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace HotelManagement.Models
{
    public class Invoice
    {
        public int HoaDonID { get; set; }
        public int DatPhongID { get; set; }
        public DateTime NgayLap { get; set; }
        public decimal TongTien { get; set; }
        public bool DaThanhToan { get; set; }
    }
}


================================================================================================
FILE PATH: Models\Room.cs
================================================================================================
using System;

namespace HotelManagement.Models
{
    public class Room
    {
        public int PhongID { get; set; }
        public string MaPhong { get; set; }
        public int LoaiPhongID { get; set; }
        public int Tang { get; set; }
        public int TrangThai { get; set; }
        public string GhiChu { get; set; }
        public DateTime? ThoiGianBatDau { get; set; }

        // Kiểu thuê & tên khách hiển thị
        // 1 = Đêm, 3 = Giờ, (2 để dành/không dùng), null = chưa xác định
        public int? KieuThue { get; set; }
        public string TenKhachHienThi { get; set; }
    }
}


================================================================================================
FILE PATH: Models\User.cs
================================================================================================
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace HotelManagement.Models
{
    public class User
    {
        public int UserID { get; set; }
        public string Username { get; set; }
        public string Password { get; set; } // demo: lưu plain text
        public string Role { get; set; }     // "Admin" hoặc "Letan"
    }
}



================================================================================================
FILE PATH: Program.cs
================================================================================================
using System;
using System.Windows.Forms;
using HotelManagement.Forms; // namespace chứa MainForm

namespace HotelManagement
{
    internal static class Program
    {
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);

            // KHÔNG chạy LoginForm nữa
            // Application.Run(new LoginForm());

            // Chạy thẳng vào giao diện chính
            Application.Run(new MainForm());
        }
    }
}


================================================================================================
FILE PATH: Properties\AssemblyInfo.cs
================================================================================================
using System.Reflection;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;

// General Information about an assembly is controlled through the following
// set of attributes. Change these attribute values to modify the information
// associated with an assembly.
[assembly: AssemblyTitle("Hotel Management")]
[assembly: AssemblyDescription("")]
[assembly: AssemblyConfiguration("")]
[assembly: AssemblyCompany("MANHPC.COM")]
[assembly: AssemblyProduct("Hotel Management")]
[assembly: AssemblyCopyright("Copyright © MANHPC.COM 2025")]
[assembly: AssemblyTrademark("")]
[assembly: AssemblyCulture("")]

// Setting ComVisible to false makes the types in this assembly not visible
// to COM components.  If you need to access a type in this assembly from
// COM, set the ComVisible attribute to true on that type.
[assembly: ComVisible(false)]

// The following GUID is for the ID of the typelib if this project is exposed to COM
[assembly: Guid("d57c892d-e5f8-426c-ab1d-e884c583ffaf")]

// Version information for an assembly consists of the following four values:
//
//      Major Version
//      Minor Version
//      Build Number
//      Revision
//
[assembly: AssemblyVersion("1.0.0.0")]
[assembly: AssemblyFileVersion("1.0.0.0")]


================================================================================================
FILE PATH: Properties\Resources.Designer.cs
================================================================================================
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.42000
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace Hotel_Management.Properties
{


    /// <summary>
    ///   A strongly-typed resource class, for looking up localized strings, etc.
    /// </summary>
    // This class was auto-generated by the StronglyTypedResourceBuilder
    // class via a tool like ResGen or Visual Studio.
    // To add or remove a member, edit your .ResX file then rerun ResGen
    // with the /str option, or rebuild your VS project.
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("System.Resources.Tools.StronglyTypedResourceBuilder", "4.0.0.0")]
    [global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
    [global::System.Runtime.CompilerServices.CompilerGeneratedAttribute()]
    internal class Resources
    {

        private static global::System.Resources.ResourceManager resourceMan;

        private static global::System.Globalization.CultureInfo resourceCulture;

        [global::System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1811:AvoidUncalledPrivateCode")]
        internal Resources()
        {
        }

        /// <summary>
        ///   Returns the cached ResourceManager instance used by this class.
        /// </summary>
        [global::System.ComponentModel.EditorBrowsableAttribute(global::System.ComponentModel.EditorBrowsableState.Advanced)]
        internal static global::System.Resources.ResourceManager ResourceManager
        {
            get
            {
                if ((resourceMan == null))
                {
                    global::System.Resources.ResourceManager temp = new global::System.Resources.ResourceManager("Hotel_Management.Properties.Resources", typeof(Resources).Assembly);
                    resourceMan = temp;
                }
                return resourceMan;
            }
        }

        /// <summary>
        ///   Overrides the current thread's CurrentUICulture property for all
        ///   resource lookups using this strongly typed resource class.
        /// </summary>
        [global::System.ComponentModel.EditorBrowsableAttribute(global::System.ComponentModel.EditorBrowsableState.Advanced)]
        internal static global::System.Globalization.CultureInfo Culture
        {
            get
            {
                return resourceCulture;
            }
            set
            {
                resourceCulture = value;
            }
        }
    }
}


================================================================================================
FILE PATH: Properties\Resources.resx
================================================================================================
<?xml version="1.0" encoding="utf-8"?>
<root>
  <!-- 
    Microsoft ResX Schema 
    
    Version 2.0
    
    The primary goals of this format is to allow a simple XML format 
    that is mostly human readable. The generation and parsing of the 
    various data types are done through the TypeConverter classes 
    associated with the data types.
    
    Example:
    
    ... ado.net/XML headers & schema ...
    <resheader name="resmimetype">text/microsoft-resx</resheader>
    <resheader name="version">2.0</resheader>
    <resheader name="reader">System.Resources.ResXResourceReader, System.Windows.Forms, ...</resheader>
    <resheader name="writer">System.Resources.ResXResourceWriter, System.Windows.Forms, ...</resheader>
    <data name="Name1"><value>this is my long string</value><comment>this is a comment</comment></data>
    <data name="Color1" type="System.Drawing.Color, System.Drawing">Blue</data>
    <data name="Bitmap1" mimetype="application/x-microsoft.net.object.binary.base64">
        <value>[base64 mime encoded serialized .NET Framework object]</value>
    </data>
    <data name="Icon1" type="System.Drawing.Icon, System.Drawing" mimetype="application/x-microsoft.net.object.bytearray.base64">
        <value>[base64 mime encoded string representing a byte array form of the .NET Framework object]</value>
        <comment>This is a comment</comment>
    </data>
                
    There are any number of "resheader" rows that contain simple 
    name/value pairs.
    
    Each data row contains a name, and value. The row also contains a 
    type or mimetype. Type corresponds to a .NET class that support 
    text/value conversion through the TypeConverter architecture. 
    Classes that don't support this are serialized and stored with the 
    mimetype set.
    
    The mimetype is used for serialized objects, and tells the 
    ResXResourceReader how to depersist the object. This is currently not 
    extensible. For a given mimetype the value must be set accordingly:
    
    Note - application/x-microsoft.net.object.binary.base64 is the format 
    that the ResXResourceWriter will generate, however the reader can 
    read any of the formats listed below.
    
    mimetype: application/x-microsoft.net.object.binary.base64
    value   : The object must be serialized with 
            : System.Serialization.Formatters.Binary.BinaryFormatter
            : and then encoded with base64 encoding.
    
    mimetype: application/x-microsoft.net.object.soap.base64
    value   : The object must be serialized with 
            : System.Runtime.Serialization.Formatters.Soap.SoapFormatter
            : and then encoded with base64 encoding.

    mimetype: application/x-microsoft.net.object.bytearray.base64
    value   : The object must be serialized into a byte array 
            : using a System.ComponentModel.TypeConverter
            : and then encoded with base64 encoding.
    -->
  <xsd:schema id="root" xmlns="" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
    <xsd:element name="root" msdata:IsDataSet="true">
      <xsd:complexType>
        <xsd:choice maxOccurs="unbounded">
          <xsd:element name="metadata">
            <xsd:complexType>
              <xsd:sequence>
                <xsd:element name="value" type="xsd:string" minOccurs="0" />
              </xsd:sequence>
              <xsd:attribute name="name" type="xsd:string" />
              <xsd:attribute name="type" type="xsd:string" />
              <xsd:attribute name="mimetype" type="xsd:string" />
            </xsd:complexType>
          </xsd:element>
          <xsd:element name="assembly">
            <xsd:complexType>
              <xsd:attribute name="alias" type="xsd:string" />
              <xsd:attribute name="name" type="xsd:string" />
            </xsd:complexType>
          </xsd:element>
          <xsd:element name="data">
            <xsd:complexType>
              <xsd:sequence>
                <xsd:element name="value" type="xsd:string" minOccurs="0" msdata:Ordinal="1" />
                <xsd:element name="comment" type="xsd:string" minOccurs="0" msdata:Ordinal="2" />
              </xsd:sequence>
              <xsd:attribute name="name" type="xsd:string" msdata:Ordinal="1" />
              <xsd:attribute name="type" type="xsd:string" msdata:Ordinal="3" />
              <xsd:attribute name="mimetype" type="xsd:string" msdata:Ordinal="4" />
            </xsd:complexType>
          </xsd:element>
          <xsd:element name="resheader">
            <xsd:complexType>
              <xsd:sequence>
                <xsd:element name="value" type="xsd:string" minOccurs="0" msdata:Ordinal="1" />
              </xsd:sequence>
              <xsd:attribute name="name" type="xsd:string" use="required" />
            </xsd:complexType>
          </xsd:element>
        </xsd:choice>
      </xsd:complexType>
    </xsd:element>
  </xsd:schema>
  <resheader name="resmimetype">
    <value>text/microsoft-resx</value>
  </resheader>
  <resheader name="version">
    <value>2.0</value>
  </resheader>
  <resheader name="reader">
    <value>System.Resources.ResXResourceReader, System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</value>
  </resheader>
  <resheader name="writer">
    <value>System.Resources.ResXResourceWriter, System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</value>
  </resheader>
</root>

================================================================================================
FILE PATH: Properties\Settings.Designer.cs
================================================================================================
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.42000
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace Hotel_Management.Properties
{


    [global::System.Runtime.CompilerServices.CompilerGeneratedAttribute()]
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.Editors.SettingsDesigner.SettingsSingleFileGenerator", "11.0.0.0")]
    internal sealed partial class Settings : global::System.Configuration.ApplicationSettingsBase
    {

        private static Settings defaultInstance = ((Settings)(global::System.Configuration.ApplicationSettingsBase.Synchronized(new Settings())));

        public static Settings Default
        {
            get
            {
                return defaultInstance;
            }
        }
    }
}


